<!doctype html>
<html lang="bn">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <base href="./">
  <title>рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рж╛ржерзА</title>
  <script src="data_sdk.js"></script>
  <script src="element_sdk.js"></script>
   <link rel="stylesheet" href="style.css">
   <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
  
  <style>@view-transition { navigation: auto; }</style>
  
 </head>
 <body>
  <div class="container"><!-- Header -->
   <div class="header">
    <div class="header-left">
     <h1 class="app-title" id="appTitle">рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рж╛ржерзА</h1>
     <p class="app-subtitle" id="welcomeMessage">ржЖржкржирж╛рж░ рж╕рзНржмрж╛рж╕рзНржерзНржп, ржЖржорж╛ржжрзЗрж░ ржжрж╛ржпрж╝рж┐рждрзНржм</p>
    </div>
    <div class="header-right"><button class="anonymous-toggle" id="anonymousToggle"> <span>ЁЯФТ</span> <span>ржЧрзЛржкржи ржорзЛржб</span> </button> <button class="btn btn-primary" id="loginBtn">рж▓ржЧржЗржи</button>
    </div>
   </div><!-- Dashboard -->
   <div class="dashboard" id="dashboard"><!-- Feature cards will be generated here -->
   </div>
  </div><!-- Voice Assistant Button --> <button class="btn-voice" id="voiceBtn" title="ржнржпрж╝рзЗрж╕ рж╕рж╣рж╛ржпрж╝ржХ">ЁЯОд</button> <!-- Modal Container -->
  <div class="modal" id="modal">
   <div class="modal-content">
    <div class="modal-header">
     <h2 class="modal-title" id="modalTitle">ржлрж┐ржЪрж╛рж░</h2><button class="close-btn" id="closeModal">├Ч</button>
    </div>
    <div id="modalBody"><!-- Modal content will be dynamically inserted here -->
    </div>
   </div>
  </div><!-- Toast Notification -->
  <div class="toast" id="toast"></div>
  <script>
    const defaultConfig = {
      app_title: 'рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рж╛ржерзА',
      welcome_message: 'ржЖржкржирж╛рж░ рж╕рзНржмрж╛рж╕рзНржерзНржп, ржЖржорж╛ржжрзЗрж░ ржжрж╛ржпрж╝рж┐рждрзНржм'
    };

    let currentUserMode = 'guest';
    let isAnonymous = false;
    let isAdmin = false;
    let selectedMood = '';
    let stressLevel = 5;
    let currentSeason = 'monsoon';
    let currentAuthTab = 'login';

    const features = [
      {
        id: 'mental-health',
        icon: 'ЁЯза',
        title: 'ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп ржЪрзЗржХ-ржЗржи',
        desc: 'ржкрзНрж░рждрж┐ржжрж┐ржи ржЖржкржирж╛рж░ ржоржи ржУ ржорзЗржЬрж╛ржЬ рж░рзЗржХрж░рзНржб ржХрж░рзБржи'
      },
      {
        id: 'health-map',
        icon: 'ЁЯЧ║я╕П',
        title: 'рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рзЗржмрж╛ ржорзНржпрж╛ржк',
        desc: 'ржХрж╛ржЫрзЗрж░ ржХрзНрж▓рж┐ржирж┐ржХ, рж╣рж╛рж╕ржкрж╛рждрж╛рж▓ ржУ ржлрж╛рж░рзНржорзЗрж╕рж┐ ржЦрзБржБржЬрзБржи'
      },
      {
        id: 'anonymous-help',
        icon: 'ЁЯФТ',
        title: 'ржЧрзЛржкржи рж╕рж╛рж╣рж╛ржпрзНржп',
        desc: 'ржирж╛ржо ржЫрж╛ржбрж╝рж╛ржЗ рж╕рж╛рж╣рж╛ржпрзНржп ржЪрж╛ржи, ржЧрзЛржкржирзАржпрж╝рждрж╛ ржирж┐рж╢рзНржЪрж┐ржд'
      },
      {
        id: 'seasonal-tips',
        icon: 'ЁЯМжя╕П',
        title: 'ржЛрждрзБ ржЕржирзБржпрж╛ржпрж╝рзА ржкрж░рж╛ржорж░рзНрж╢',
        desc: 'ржмрж░рзНрж╖рж╛, рж╢рзАржд, ржЧрзНрж░рзАрж╖рзНржорзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп ржЯрж┐ржкрж╕'
      },
      {
        id: 'maternal-child',
        icon: 'ЁЯС╢',
        title: 'ржорж╛ ржУ рж╢рж┐рж╢рзБ рж╕рзНржмрж╛рж╕рзНржерзНржп',
        desc: 'ржЧрж░рзНржнржХрж╛рж▓рзАржи ржУ ржЯрж┐ржХрж╛рж░ рж╕ржоржпрж╝рж╕рзВржЪрзА'
      },
      {
        id: 'symptom-guide',
        icon: 'ЁЯй║',
        title: 'рж▓ржХрзНрж╖ржг рж╕ржЪрзЗрждржирждрж╛',
        desc: 'ржХржЦржи ржбрж╛ржХрзНрждрж╛рж░ ржжрзЗржЦрж╛ржмрзЗржи ржЬрж╛ржирзБржи'
      },
      {
        id: 'health-events',
        icon: 'ЁЯУЕ',
        title: 'рж╕рзНржмрж╛рж╕рзНржерзНржп ржХрзНржпрж╛ржорзНржк',
        desc: 'ржЖрж╕ржирзНржи рж╕рзНржмрж╛рж╕рзНржерзНржп рж╢рж┐ржмрж┐рж░ ржУ ржХрж░рзНржорж╕рзВржЪрзА'
      },
      {
        id: 'health-workers',
        icon: 'ЁЯСитАНтЪХя╕П',
        title: 'рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА ржЦрзБржБржЬрзБржи',
        desc: 'ржкрзНрж░рж╢рж┐ржХрзНрж╖рж┐ржд рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзАржжрзЗрж░ рждрж╛рж▓рж┐ржХрж╛'
      },
      {
        id: 'admin-stats',
        icon: 'ЁЯУК',
        title: 'ржбрзЗржЯрж╛ рж░рж┐ржкрзЛрж░рзНржЯ',
        desc: 'ржПржиржЬрж┐ржУржжрзЗрж░ ржЬржирзНржп ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи (рж╢рзБржзрзБ ржЕрзНржпрж╛ржбржорж┐ржи)',
        adminOnly: true
      }
    ];

    const divisions = ['ржврж╛ржХрж╛', 'ржЪржЯрзНржЯржЧрзНрж░рж╛ржо', 'рж░рж╛ржЬрж╢рж╛рж╣рзА', 'ржЦрзБрж▓ржирж╛', 'ржмрж░рж┐рж╢рж╛рж▓', 'рж╕рж┐рж▓рзЗржЯ', 'рж░ржВржкрзБрж░', 'ржоржпрж╝ржоржирж╕рж┐ржВрж╣'];
    
    const zillasByDivision = {
      'ржврж╛ржХрж╛': ['ржврж╛ржХрж╛', 'ржЧрж╛ржЬрзАржкрзБрж░', 'ржирж╛рж░рж╛ржпрж╝ржгржЧржЮрзНржЬ', 'ржЯрж╛ржЩрзНржЧрж╛ржЗрж▓', 'ржХрж┐рж╢рзЛрж░ржЧржЮрзНржЬ'],
      'ржЪржЯрзНржЯржЧрзНрж░рж╛ржо': ['ржЪржЯрзНржЯржЧрзНрж░рж╛ржо', 'ржХржХрзНрж╕ржмрж╛ржЬрж╛рж░', 'рж░рж╛ржЩрзНржЧрж╛ржорж╛ржЯрж┐', 'ржмрж╛ржирзНржжрж░ржмрж╛ржи', 'ржЦрж╛ржЧржбрж╝рж╛ржЫржбрж╝рж┐'],
      'рж░рж╛ржЬрж╢рж╛рж╣рзА': ['рж░рж╛ржЬрж╢рж╛рж╣рзА', 'ржирж╛ржЯрзЛрж░', 'ржкрж╛ржмржирж╛', 'ржмржЧрзБржбрж╝рж╛', 'рж╕рж┐рж░рж╛ржЬржЧржЮрзНржЬ'],
      'ржЦрзБрж▓ржирж╛': ['ржЦрзБрж▓ржирж╛', 'ржпрж╢рзЛрж░', 'рж╕рж╛рждржХрзНрж╖рзАрж░рж╛', 'ржмрж╛ржЧрзЗрж░рж╣рж╛ржЯ', 'ржХрзБрж╖рзНржЯрж┐ржпрж╝рж╛'],
      'ржмрж░рж┐рж╢рж╛рж▓': ['ржмрж░рж┐рж╢рж╛рж▓', 'ржкржЯрзБржпрж╝рж╛ржЦрж╛рж▓рзА', 'ржнрзЛрж▓рж╛', 'ржмрж░ржЧрзБржирж╛', 'ржЭрж╛рж▓ржХрж╛ржарж┐'],
      'рж╕рж┐рж▓рзЗржЯ': ['рж╕рж┐рж▓рзЗржЯ', 'ржорзМрж▓ржнрзАржмрж╛ржЬрж╛рж░', 'рж╣ржмрж┐ржЧржЮрзНржЬ', 'рж╕рзБржирж╛ржоржЧржЮрзНржЬ'],
      'рж░ржВржкрзБрж░': ['рж░ржВржкрзБрж░', 'ржжрж┐ржирж╛ржЬржкрзБрж░', 'ржарж╛ржХрзБрж░ржЧрж╛ржБржУ', 'ржкржЮрзНржЪржЧржбрж╝', 'ржирзАрж▓ржлрж╛ржорж╛рж░рзА'],
      'ржоржпрж╝ржоржирж╕рж┐ржВрж╣': ['ржоржпрж╝ржоржирж╕рж┐ржВрж╣', 'ржЬрж╛ржорж╛рж▓ржкрзБрж░', 'ржирзЗрждрзНрж░ржХрзЛржирж╛', 'рж╢рзЗрж░ржкрзБрж░']
    };

    const upazilasByZilla = {
      'ржврж╛ржХрж╛': ['ржзрж╛ржорж░рж╛ржЗ', 'рж╕рж╛ржнрж╛рж░', 'ржХрзЗрж░рж╛ржирзАржЧржЮрзНржЬ', 'ржиржмрж╛ржмржЧржЮрзНржЬ', 'ржжрзЛрж╣рж╛рж░'],
      'ржЧрж╛ржЬрзАржкрзБрж░': ['ржХрж╛рж▓рж┐ржпрж╝рж╛ржХрзИрж░', 'ржХрж╛ржкрж╛рж╕рж┐ржпрж╝рж╛', 'рж╢рзНрж░рзАржкрзБрж░', 'ржЧрж╛ржЬрзАржкрзБрж░ рж╕ржжрж░'],
      'ржкржЯрзБржпрж╝рж╛ржЦрж╛рж▓рзА': ['ржХрж▓рж╛ржкрж╛ржбрж╝рж╛', 'ржЧрж▓рж╛ржЪрж┐ржкрж╛', 'ржжрзБржоржХрж┐', 'ржкржЯрзБржпрж╝рж╛ржЦрж╛рж▓рзА рж╕ржжрж░']
    };

    const healthFacilities = [
      {
        name: 'ржХрж▓рж╛ржкрж╛ржбрж╝рж╛ ржЙржкржЬрзЗрж▓рж╛ рж╕рзНржмрж╛рж╕рзНржерзНржп ржХржоржкрзНрж▓рзЗржХрзНрж╕',
        type: 'ржЙржкржЬрзЗрж▓рж╛ рж╣рж╛рж╕ржкрж╛рждрж╛рж▓',
        division: 'ржмрж░рж┐рж╢рж╛рж▓',
        zilla: 'ржкржЯрзБржпрж╝рж╛ржЦрж╛рж▓рзА',
        upazila: 'ржХрж▓рж╛ржкрж╛ржбрж╝рж╛',
        schedule: 'ржоржЩрзНржЧрж▓ржмрж╛рж░ ржУ ржмрзГрж╣рж╕рзНржкрждрж┐ржмрж╛рж░ рж╕ржХрж╛рж▓ рзпржЯрж╛ - ржмрж┐ржХрж╛рж▓ рзкржЯрж╛',
        transport: 'ржирзМржХрж╛ржпрж╝ рзкрзл ржорж┐ржирж┐ржЯ + ржмрж╛рж╕рзЗ рзйрзж ржорж┐ржирж┐ржЯ',
        services: 'рж╕рж╛ржзрж╛рж░ржг ржЪрж┐ржХрж┐рзОрж╕рж╛, ржорж╛ ржУ рж╢рж┐рж╢рзБ рж╕рзНржмрж╛рж╕рзНржерзНржп, ржЯрж┐ржХрж╛ржжрж╛ржи'
      },
      {
        name: 'ржЪрж░ ржХрж▓рж╛ржкрж╛ржбрж╝рж╛ ржХржорж┐ржЙржирж┐ржЯрж┐ ржХрзНрж▓рж┐ржирж┐ржХ',
        type: 'ржХржорж┐ржЙржирж┐ржЯрж┐ ржХрзНрж▓рж┐ржирж┐ржХ',
        division: 'ржмрж░рж┐рж╢рж╛рж▓',
        zilla: 'ржкржЯрзБржпрж╝рж╛ржЦрж╛рж▓рзА',
        upazila: 'ржХрж▓рж╛ржкрж╛ржбрж╝рж╛',
        schedule: 'рж░ржмрж┐ржмрж╛рж░ ржерзЗржХрзЗ ржмрзГрж╣рж╕рзНржкрждрж┐ржмрж╛рж░ рж╕ржХрж╛рж▓ рзпржЯрж╛ - ржжрзБржкрзБрж░ рззржЯрж╛',
        transport: 'рж╣рзЗржБржЯрзЗ рзирзж ржорж┐ржирж┐ржЯ',
        services: 'ржкрзНрж░рж╛ржержорж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛, ржЯрж┐ржХрж╛ржжрж╛ржи, ржкрж░рж┐ржмрж╛рж░ ржкрж░рж┐ржХрж▓рзНржкржирж╛'
      },
      {
        name: 'ржзрж╛ржорж░рж╛ржЗ ржЙржкржЬрзЗрж▓рж╛ рж╕рзНржмрж╛рж╕рзНржерзНржп ржХржоржкрзНрж▓рзЗржХрзНрж╕',
        type: 'ржЙржкржЬрзЗрж▓рж╛ рж╣рж╛рж╕ржкрж╛рждрж╛рж▓',
        division: 'ржврж╛ржХрж╛',
        zilla: 'ржврж╛ржХрж╛',
        upazila: 'ржзрж╛ржорж░рж╛ржЗ',
        schedule: 'ржкрзНрж░рждрж┐ржжрж┐ржи рзирзк ржШржгрзНржЯрж╛',
        transport: 'ржмрж╛рж╕рзЗ рзз ржШржгрзНржЯрж╛',
        services: 'ржЬрж░рзБрж░рж┐ рж╕рзЗржмрж╛, рж╕рж╛ржзрж╛рж░ржг ржЪрж┐ржХрж┐рзОрж╕рж╛, ржЕржкрж╛рж░рзЗрж╢ржи'
      }
    ];

    const seasonalTips = {
      monsoon: {
        monthlyAlert: {
          title: 'ЁЯЪи ржмрж░рзНрж╖рж╛ржХрж╛рж▓рзАржи ржорж╛рж╕рж┐ржХ рж╕рждрж░рзНржХрждрж╛',
          message: 'ржмрж░рзНрж╖рж╛ржХрж╛рж▓рзЗ ржбрзЗржЩрзНржЧрзБ, ржЪрж┐ржХрзБржиржЧрзБржирж┐ржпрж╝рж╛ ржУ ржкрж╛ржирж┐ржмрж╛рж╣рж┐ржд рж░рзЛржЧрзЗрж░ ржкрзНрж░ржХрзЛржк ржмрзЗржбрж╝рзЗ ржпрж╛ржпрж╝ред ржмрж┐рж╢рзЗрж╖ рж╕рждрж░рзНржХрждрж╛ ржЕржмрж▓ржорзНржмржи ржХрж░рзБржиред',
          date: 'ржЬрзБржи-рж╕рзЗржкрзНржЯрзЗржорзНржмрж░'
        },
        critical: [
          {
            title: 'ЁЯЪи ржбрзЗржЩрзНржЧрзБ ржкрзНрж░рждрж┐рж░рзЛржз (ржЕрждрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг)',
            content: 'ржмрж╛ржбрж╝рж┐рж░ ржЖрж╢рзЗржкрж╛рж╢рзЗ ржЬржорж╛ ржкрж╛ржирж┐ ржлрзЗрж▓рзЗ ржжрж┐ржиред ржлрзБрж▓рзЗрж░ ржЯржм, ржЯрж╛ржпрж╝рж╛рж░, ржкрзНрж▓рж╛рж╕рзНржЯрж┐ржХрзЗрж░ ржкрж╛рждрзНрж░ ржкрж░рж┐рж╖рзНржХрж╛рж░ рж░рж╛ржЦрзБржиред ржорж╢рж╛рж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред ржЬрзНржмрж░ рж╣рж▓рзЗ ржжрзНрж░рзБржд ржбрж╛ржХрзНрждрж╛рж░ ржжрзЗржЦрж╛ржиред',
            priority: 'critical'
          },
          {
            title: 'тЪая╕П ржкрж╛ржирж┐ржмрж╛рж╣рж┐ржд рж░рзЛржЧ (ржЕрждрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг)',
            content: 'ржкрж╛ржирж┐ рззрзж ржорж┐ржирж┐ржЯ ржлрзБржЯрж┐ржпрж╝рзЗ ржкрж╛ржи ржХрж░рзБржиред рж╣рж╛ржд рж╕рж╛ржмрж╛ржи ржжрж┐ржпрж╝рзЗ рзирзж рж╕рзЗржХрзЗржирзНржб ржзрзБржпрж╝рзЗ ржирж┐ржиред ржХрж╛ржБржЪрж╛ рж╕рж╛рж▓рж╛ржж ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржиред ржбрж╛ржпрж╝рж░рж┐ржпрж╝рж╛ рж╣рж▓рзЗ ржЦрж╛ржмрж╛рж░ рж╕рзНржпрж╛рж▓рж╛ржЗржи ржЦрж╛ржиред',
            priority: 'critical'
          }
        ],
        important: [
          {
            title: 'ЁЯжа ржЫрждрзНрж░рж╛ржХ рж╕ржВржХрзНрж░ржоржг ржкрзНрж░рждрж┐рж░рзЛржз',
            content: 'ржнрзЗржЬрж╛ ржХрж╛ржкржбрж╝ ржжрзНрж░рзБржд рж╢рзБржХрж┐ржпрж╝рзЗ ржирж┐ржиред ржкрж╛ рж╕ржмрж╕ржоржпрж╝ рж╢рзБржХржирзЛ рж░рж╛ржЦрзБржиред ржнрзЗржЬрж╛ ржЬрзБрждрж╛ ржкрж░ржмрзЗржи ржирж╛ред ржЪрзБрж▓ржХрж╛ржирж┐ ржмрж╛ржбрж╝рж▓рзЗ ржбрж╛ржХрзНрждрж╛рж░ ржжрзЗржЦрж╛ржиред',
            priority: 'important'
          },
          {
            title: 'ЁЯПа ржШрж░ ржкрж░рж┐рж╖рзНржХрж╛рж░ рж░рж╛ржЦрзБржи',
            content: 'ржШрж░рзЗ ржмрж╛рждрж╛рж╕ ржЪрж▓рж╛ржЪрж▓рзЗрж░ ржмрзНржпржмрж╕рзНржерж╛ рж░рж╛ржЦрзБржиред рж╕рзНржпрж╛ржБрждрж╕рзЗржБрждрзЗ ржЬрж╛ржпрж╝ржЧрж╛ ржкрж░рж┐рж╖рзНржХрж╛рж░ рж░рж╛ржЦрзБржиред ржмрж╛ржерж░рзБржо ржУ рж░рж╛ржирзНржирж╛ржШрж░ рж╢рзБржХржирзЛ рж░рж╛ржЦрзБржиред',
            priority: 'important'
          },
          {
            title: 'ЁЯНО ржЦрж╛ржжрзНржп ржирж┐рж░рж╛ржкрждрзНрждрж╛',
            content: 'рж░рж╛ржирзНржирж╛ ржХрж░рж╛ ржЦрж╛ржмрж╛рж░ рзи ржШржгрзНржЯрж╛рж░ ржоржзрзНржпрзЗ ржЦрж╛ржиред ржлрж▓ ржнрж╛рж▓рзЛ ржХрж░рзЗ ржзрзБржпрж╝рзЗ ржЦрж╛ржиред рж░рж╛рж╕рзНрждрж╛рж░ ржЦрзЛрж▓рж╛ ржЦрж╛ржмрж╛рж░ ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржиред',
            priority: 'important'
          }
        ],
        corona: [
          {
            title: 'ЁЯШ╖ ржХрзЛржнрж┐ржб-рззрзп рж╕рждрж░рзНржХрждрж╛ (ржмрж░рзНрж╖рж╛ржпрж╝)',
            content: 'ржмрж░рзНрж╖рж╛ржпрж╝ ржШрж░рзЗ ржмрзЗрж╢рж┐ рж╕ржоржпрж╝ ржХрж╛ржЯрж╛ржирзЛрж░ ржХрж╛рж░ржгрзЗ ржХрзЛржнрж┐ржб рж╕ржВржХрзНрж░ржоржгрзЗрж░ ржЭрзБржБржХрж┐ ржмрж╛ржбрж╝рзЗред ржорж╛рж╕рзНржХ ржкрж░рзБржи, рж╣рж╛ржд ржзрзБржпрж╝рзЗ ржирж┐ржи, ржнрж┐ржбрж╝ ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржиред'
          }
        ]
      },
      winter: {
        monthlyAlert: {
          title: 'тЭДя╕П рж╢рзАрждржХрж╛рж▓рзАржи ржорж╛рж╕рж┐ржХ рж╕рждрж░рзНржХрждрж╛',
          message: 'рж╢рзАрждржХрж╛рж▓рзЗ ржирж┐ржЙржорзЛржирж┐ржпрж╝рж╛, рж╕рж░рзНржжрж┐-ржХрж╛рж╢рж┐ ржУ рж╢рзНржмрж╛рж╕ржХрж╖рзНржЯрзЗрж░ рж╕ржорж╕рзНржпрж╛ ржмрзЗржбрж╝рзЗ ржпрж╛ржпрж╝ред ржмрж┐рж╢рзЗрж╖ржнрж╛ржмрзЗ рж╢рж┐рж╢рзБ ржУ ржмржпрж╝рж╕рзНржХржжрзЗрж░ ржпрждрзНржи ржирж┐ржиред',
          date: 'ржбрж┐рж╕рзЗржорзНржмрж░-ржлрзЗржмрзНрж░рзБржпрж╝рж╛рж░рж┐'
        },
        critical: [
          {
            title: 'ЁЯлБ ржирж┐ржЙржорзЛржирж┐ржпрж╝рж╛ ржкрзНрж░рждрж┐рж░рзЛржз (ржЕрждрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг)',
            content: 'рж╢рж┐рж╢рзБржжрзЗрж░ ржЧрж░ржо ржХрж╛ржкржбрж╝ ржкрж░рж╛ржиред рж╢рзНржмрж╛рж╕ржХрж╖рзНржЯ, ржжрзНрж░рзБржд рж╢рзНржмрж╛рж╕ ржмрж╛ ржмрзБржХрзЗ ржмрзНржпржерж╛ рж╣рж▓рзЗ ржжрзНрж░рзБржд рж╣рж╛рж╕ржкрж╛рждрж╛рж▓рзЗ ржирж┐ржиред ржирж┐ржЙржорзЛржирж┐ржпрж╝рж╛рж░ ржЯрж┐ржХрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржиред',
            priority: 'critical'
          },
          {
            title: 'ЁЯФе ржХрж╛рж░рзНржмржи ржоржирзЛржХрзНрж╕рж╛ржЗржб ржмрж┐рж╖ржХрзНрж░рж┐ржпрж╝рж╛ (ржЕрждрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг)',
            content: 'ржмржирзНржз ржШрж░рзЗ ржХржпрж╝рж▓рж╛ ржмрж╛ ржХрж╛ржа ржЬрзНржмрж╛рж▓рж╛ржмрзЗржи ржирж╛ред рж╣рж┐ржЯрж╛рж░ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕ржоржпрж╝ ржмрж╛рждрж╛рж╕ ржЪрж▓рж╛ржЪрж▓рзЗрж░ ржмрзНржпржмрж╕рзНржерж╛ рж░рж╛ржЦрзБржиред ржорж╛ржерж╛ ржШрзЛрж░рж╛ ржмрж╛ ржмржорж┐ ржнрж╛ржм рж╣рж▓рзЗ ржмрж╛ржЗрж░рзЗ ржмрзЗрж░ рж╣ржиред',
            priority: 'critical'
          }
        ],
        important: [
          {
            title: 'ЁЯдз рж╕рж░рзНржжрж┐-ржХрж╛рж╢рж┐ ржкрзНрж░рждрж┐рж░рзЛржз',
            content: 'ржЧрж░ржо ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржиред ржарж╛ржирзНржбрж╛ ржмрж╛рждрж╛рж╕ ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржиред рж╣рж╛ржБржЪрж┐-ржХрж╛рж╢рж┐рж░ рж╕ржоржпрж╝ ржорзБржЦ ржврж╛ржХрзБржиред ржнрж┐ржЯрж╛ржорж┐ржи рж╕рж┐ рж╕ржорзГржжрзНржз ржЦрж╛ржмрж╛рж░ ржЦрж╛ржиред',
            priority: 'important'
          },
          {
            title: 'ЁЯз┤ рждрзНржмржХрзЗрж░ ржпрждрзНржи',
            content: 'рждрзНржмржХ рж╢рзБрж╖рзНржХ рж╣рж▓рзЗ рждрзЗрж▓ ржмрж╛ рж▓рзЛрж╢ржи ржорж╛ржЦрзБржиред ржмрзЗрж╢рж┐ ржЧрж░ржо ржкрж╛ржирж┐рждрзЗ ржЧрзЛрж╕рж▓ ржХрж░ржмрзЗржи ржирж╛ред ржарзЛржБржЯ ржлрж╛ржЯрж▓рзЗ ржнрзНржпрж╛рж╕рж▓рж┐ржи рж▓рж╛ржЧрж╛ржиред',
            priority: 'important'
          },
          {
            title: 'ЁЯПГтАНтЩВя╕П рж╢рзАрждрзЗ ржмрзНржпрж╛ржпрж╝рж╛ржо',
            content: 'рж╕ржХрж╛рж▓рзЗ рж░рзЛржжрзЗ рж╣рж╛ржБржЯрзБржиред ржШрж░рзЗрж░ ржнрж┐рждрж░рзЗ рж╣рж╛рж▓ржХрж╛ ржмрзНржпрж╛ржпрж╝рж╛ржо ржХрж░рзБржиред рж╣ржарж╛рзО ржарж╛ржирзНржбрж╛ржпрж╝ ржмрзЗрж░ рж╣ржмрзЗржи ржирж╛ред',
            priority: 'important'
          }
        ],
        corona: [
          {
            title: 'ЁЯШ╖ ржХрзЛржнрж┐ржб-рззрзп рж╕рждрж░рзНржХрждрж╛ (рж╢рзАрждрзЗ)',
            content: 'рж╢рзАрждрзЗ ржШрж░рзЗ ржмрзЗрж╢рж┐ рж╕ржоржпрж╝ ржХрж╛ржЯрж╛ржирзЛ ржУ ржмрж╛рждрж╛рж╕ ржЪрж▓рж╛ржЪрж▓ ржХржо ржерж╛ржХрж╛ржпрж╝ ржХрзЛржнрж┐ржб рж╕ржВржХрзНрж░ржоржгрзЗрж░ ржЭрзБржБржХрж┐ ржмрж╛ржбрж╝рзЗред ржирж┐ржпрж╝ржорж┐ржд ржШрж░ ржмрж╛рждрж╛рж╕ ржХрж░рзБржи, ржорж╛рж╕рзНржХ ржкрж░рзБржиред'
          }
        ]
      },
      summer: {
        monthlyAlert: {
          title: 'тШАя╕П ржЧрзНрж░рзАрж╖рзНржоржХрж╛рж▓рзАржи ржорж╛рж╕рж┐ржХ рж╕рждрж░рзНржХрждрж╛',
          message: 'ржЧрзНрж░рзАрж╖рзНржоржХрж╛рж▓рзЗ рж╣рж┐ржЯ рж╕рзНржЯрзНрж░рзЛржХ, ржкрж╛ржирж┐рж╢рзВржирзНржпрждрж╛ ржУ ржЦрж╛ржжрзНржпрзЗ ржмрж┐рж╖ржХрзНрж░рж┐ржпрж╝рж╛рж░ ржЭрзБржБржХрж┐ ржмрзЗржбрж╝рзЗ ржпрж╛ржпрж╝ред ржЕрждрж┐рж░рж┐ржХрзНржд ржЧрж░ржорзЗ рж╕рждрж░рзНржХ ржерж╛ржХрзБржиред',
          date: 'ржорж╛рж░рзНржЪ-ржорзЗ'
        },
        critical: [
          {
            title: 'ЁЯМбя╕П рж╣рж┐ржЯ рж╕рзНржЯрзНрж░рзЛржХ ржкрзНрж░рждрж┐рж░рзЛржз (ржЕрждрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг)',
            content: 'ржжрзБржкрзБрж░ рззрззржЯрж╛ ржерзЗржХрзЗ рзйржЯрж╛ ржкрж░рзНржпржирзНржд рж░рзЛржжрзЗ ржмрзЗрж░ рж╣ржмрзЗржи ржирж╛ред ржмрзЗрж╢рж┐ ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржиред ржорж╛ржерж╛ ржШрзЛрж░рж╛, ржмржорж┐ ржнрж╛ржм ржмрж╛ ржЕржЬрзНржЮрж╛ржи рж╣рж▓рзЗ ржжрзНрж░рзБржд ржЫрж╛ржпрж╝рж╛ржпрж╝ ржирж┐ржпрж╝рзЗ ржпрж╛ржиред',
            priority: 'critical'
          },
          {
            title: 'ЁЯТз ржкрж╛ржирж┐рж╢рзВржирзНржпрждрж╛ ржкрзНрж░рждрж┐рж░рзЛржз (ржЕрждрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг)',
            content: 'ржкрзНрж░рждрж┐ рззрзл-рзирзж ржорж┐ржирж┐ржЯрзЗ ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржиред ржкрзНрж░рж╕рзНрж░рж╛ржм ржЧрж╛ржврж╝ рж╣рж▓рзБржж рж╣рж▓рзЗ ржмрзЗрж╢рж┐ ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржиред ржбрж╛ржмрзЗрж░ ржкрж╛ржирж┐, рж▓рзЗржмрзБрж░ рж╢рж░ржмржд ржЦрж╛ржиред',
            priority: 'critical'
          }
        ],
        important: [
          {
            title: 'ЁЯН╜я╕П ржЦрж╛ржжрзНржпрзЗ ржмрж┐рж╖ржХрзНрж░рж┐ржпрж╝рж╛ ржкрзНрж░рждрж┐рж░рзЛржз',
            content: 'ржмрж╛рж╕рж┐ ржЦрж╛ржмрж╛рж░ ржЦрж╛ржмрзЗржи ржирж╛ред рж░рж╛рж╕рзНрждрж╛рж░ ржЦрзЛрж▓рж╛ ржЦрж╛ржмрж╛рж░ ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржиред ржорж╛ржВрж╕ ржнрж╛рж▓рзЛ ржХрж░рзЗ рж░рж╛ржирзНna ржХрж░рзБржиред ржкрзЗржЯ ржмрзНржпржерж╛ рж╣рж▓рзЗ ржбрж╛ржХрзНрждрж╛рж░ ржжрзЗржЦрж╛ржиред',
            priority: 'important'
          },
          {
            title: 'ЁЯСХ ржЙржкржпрзБржХрзНржд ржкрзЛрж╢рж╛ржХ',
            content: 'рж╣рж╛рж▓ржХрж╛ рж░ржЩрзЗрж░ рж╕рзБрждрж┐рж░ ржХрж╛ржкржбрж╝ ржкрж░рзБржиред ржорж╛ржерж╛ржпрж╝ ржЯрзБржкрж┐ ржмрж╛ ржХрж╛ржкржбрж╝ ржжрж┐ржпрж╝рзЗ ржврзЗржХрзЗ рж░рж╛ржЦрзБржиред ржЪрзЛржЦрзЗ рж╕рж╛ржиржЧрзНрж▓рж╛рж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред',
            priority: 'important'
          },
          {
            title: 'ЁЯПа ржШрж░ ржарж╛ржирзНржбрж╛ рж░рж╛ржЦрзБржи',
            content: 'ржжрж┐ржирзЗрж░ ржмрзЗрж▓рж╛ ржЬрж╛ржирж╛рж▓рж╛ ржмржирзНржз рж░рж╛ржЦрзБржиред ржкрж╛ржЦрж╛ ржмрж╛ ржПрж╕рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред ржнрзЗржЬрж╛ ржХрж╛ржкржбрж╝ ржЭрзБрж▓рж┐ржпрж╝рзЗ рж░рж╛ржЦрзБржиред',
            priority: 'important'
          }
        ],
        corona: [
          {
            title: 'ЁЯШ╖ ржХрзЛржнрж┐ржб-рззрзп рж╕рждрж░рзНржХрждрж╛ (ржЧрзНрж░рзАрж╖рзНржорзЗ)',
            content: 'ржЧрж░ржорзЗ ржорж╛рж╕рзНржХ ржкрж░рж╛ ржХрж╖рзНржЯржХрж░ рж╣рж▓рзЗржУ ржЬржирж╕ржорж╛ржЧржорзЗ ржЕржмрж╢рзНржпржЗ ржкрж░рзБржиред ржШржи ржШржи рж╣рж╛ржд ржзрзБржпрж╝рзЗ ржирж┐ржиред ржПрж╕рж┐ ржЪрж╛рж▓рзБ рж░рж╛ржЦрж▓рзЗржУ ржмрж╛рждрж╛рж╕ ржЪрж▓рж╛ржЪрж▓рзЗрж░ ржмрзНржпржмрж╕рзНржерж╛ рж░рж╛ржЦрзБржиред'
          }
        ]
      },
      yearround: {
        monthlyAlert: {
          title: 'ЁЯФД рж╕рж╛рж░рж╛ ржмржЫрж░рзЗрж░ рж╕рждрж░рзНржХрждрж╛',
          message: 'ржПржЗ рж╕рзНржмрж╛рж╕рзНржерзНржп ржЯрж┐ржкрж╕ржЧрзБрж▓рзЛ рж╕рж╛рж░рж╛ ржмржЫрж░ ржорзЗржирзЗ ржЪрж▓рзБржиред ржирж┐ржпрж╝ржорж┐ржд ржЕржирзБрж╕рж░ржг ржХрж░рж▓рзЗ рж╕рзБрж╕рзНрже ржерж╛ржХржмрзЗржиред',
          date: 'рж╕рж╛рж░рж╛ ржмржЫрж░'
        },
        critical: [
          {
            title: 'ЁЯз╝ рж╣рж╛ржд ржзрзЛржпрж╝рж╛рж░ ржирж┐ржпрж╝ржо (ржЕрждрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг)',
            content: 'рж╕рж╛ржмрж╛ржи ржжрж┐ржпрж╝рзЗ рзирзж рж╕рзЗржХрзЗржирзНржб рж╣рж╛ржд ржзрзБржпрж╝рзЗ ржирж┐ржиред ржЦрж╛ржУржпрж╝рж╛рж░ ржЖржЧрзЗ, ржЯржпрж╝рж▓рзЗржЯрзЗрж░ ржкрж░рзЗ, ржмрж╛ржЗрж░рзЗ ржерзЗржХрзЗ ржПрж╕рзЗ рж╣рж╛ржд ржзрзБрждрзЗ ржнрзБрж▓ржмрзЗржи ржирж╛ред рж╣рзНржпрж╛ржирзНржб рж╕рзНржпрж╛ржирж┐ржЯрж╛ржЗржЬрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред',
            priority: 'critical'
          },
          {
            title: 'ЁЯТК ржирж┐ржпрж╝ржорж┐ржд рж╕рзНржмрж╛рж╕рзНржерзНржп ржкрж░рзАржХрзНрж╖рж╛ (ржЕрждрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг)',
            content: 'ржмржЫрж░рзЗ ржЕржирзНрждржд ржПржХржмрж╛рж░ рж╕ржорзНржкрзВрж░рзНржг рж╕рзНржмрж╛рж╕рзНржерзНржп ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛ржиред рж░ржХрзНрждржЪрж╛ржк, ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕, ржХрзЛрж▓рзЗрж╕рзНржЯрзЗрж░рж▓ ржирж┐ржпрж╝ржорж┐ржд ржорж╛ржкрзБржиред рзкрзж+ ржмржпрж╝рж╕рзЗ ржЖрж░рзЛ рж╕рждрж░рзНржХ ржерж╛ржХрзБржиред',
            priority: 'critical'
          }
        ],
        important: [
          {
            title: 'ЁЯеЧ ржкрзБрж╖рзНржЯрж┐ржХрж░ ржЦрж╛ржмрж╛рж░',
            content: 'ржкрзНрж░рждрж┐ржжрж┐ржи рзл ржзрж░ржирзЗрж░ ржлрж▓ ржУ рж╕ржмржЬрж┐ ржЦрж╛ржиред ржбрж┐ржо, ржорж╛ржЫ, ржбрж╛рж▓ ржЦрж╛ржиред ржнрж╛ржЬрж╛ржкрзЛржбрж╝рж╛ ржУ ржЪрж┐ржирж┐ржпрзБржХрзНржд ржЦрж╛ржмрж╛рж░ ржХржо ржЦрж╛ржиред ржкрж░рзНржпрж╛ржкрзНржд ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржиред',
            priority: 'important'
          },
          {
            title: 'ЁЯПГтАНтЩАя╕П ржирж┐ржпрж╝ржорж┐ржд ржмрзНржпрж╛ржпрж╝рж╛ржо',
            content: 'ржкрзНрж░рждрж┐ржжрж┐ржи рзйрзж ржорж┐ржирж┐ржЯ рж╣рж╛ржБржЯрзБржи ржмрж╛ ржмрзНржпрж╛ржпрж╝рж╛ржо ржХрж░рзБржиред рж╕ржХрж╛рж▓рзЗ рж╣рж╛рж▓ржХрж╛ ржмрзНржпрж╛ржпрж╝рж╛ржо ржХрж░рзБржиред рж╕рж┐ржБржбрж╝рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред ржжрзАрж░рзНржШржХрзНрж╖ржг ржмрж╕рзЗ ржерж╛ржХржмрзЗржи ржирж╛ред',
            priority: 'important'
          },
          {
            title: 'ЁЯШ┤ ржкрж░рзНржпрж╛ржкрзНржд ржШрзБржо',
            content: 'ржкрзНрж░рждрж┐ржжрж┐ржи рзн-рзо ржШржгрзНржЯрж╛ ржШрзБржорж╛ржиред рж░рж╛ржд рззрзжржЯрж╛рж░ ржоржзрзНржпрзЗ ржШрзБржорж╛рждрзЗ ржпрж╛ржиред ржШрзБржорж╛ржирзЛрж░ ржЖржЧрзЗ ржорзЛржмрж╛ржЗрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи ржирж╛ред ржШрзБржорзЗрж░ ржШрж░ ржЕржирзНржзржХрж╛рж░ рж░рж╛ржЦрзБржиред',
            priority: 'important'
          },
          {
            title: 'ЁЯЪн ржзрзВржоржкрж╛ржи ржУ ржоржжрзНржпржкрж╛ржи рждрзНржпрж╛ржЧ',
            content: 'ржзрзВржоржкрж╛ржи рж╕ржорзНржкрзВрж░рзНржг рждрзНржпрж╛ржЧ ржХрж░рзБржиред ржоржжрзНржпржкрж╛ржи ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржиред рждрж╛ржорж╛ржХ ржЬрж╛рждрзАржпрж╝ ржжрзНрж░ржмрзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи ржирж╛ред ржкрзНрж░ржпрж╝рзЛржЬржирзЗ ржЪрж┐ржХрж┐рзОрж╕ржХрзЗрж░ рж╕рж╛рж╣рж╛ржпрзНржп ржирж┐ржиред',
            priority: 'important'
          }
        ],
        corona: [
          {
            title: 'ЁЯШ╖ ржХрзЛржнрж┐ржб-рззрзп ржжрзАрж░рзНржШржорзЗржпрж╝рж╛ржжрзА рж╕рждрж░рзНржХрждрж╛',
            content: 'ржирж┐ржпрж╝ржорж┐ржд ржорж╛рж╕рзНржХ ржкрж░рзБржи, рж╣рж╛ржд ржзрзБржпрж╝рзЗ ржирж┐ржиред ржнрж┐ржбрж╝ ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржиред ржХрзЛржнрж┐ржб ржЯрж┐ржХрж╛ ржирж┐ржпрж╝рзЗ рж░рж╛ржЦрзБржиред ржЕрж╕рзБрж╕рзНрже ржмрзЛржз ржХрж░рж▓рзЗ ржШрж░рзЗ ржерж╛ржХрзБржиред'
          }
        ]
      }
    };

    const vaccineSchedule = [
      { name: 'ржмрж┐рж╕рж┐ржЬрж┐', ageMonths: 0, description: 'ржЬржирзНржорзЗрж░ рж╕ржоржпрж╝' },
      { name: 'ржкрзЗржирзНржЯрж╛-рзз', ageMonths: 1.5, description: 'рзм рж╕ржкрзНрждрж╛рж╣' },
      { name: 'ржкрзЗржирзНржЯрж╛-рзи', ageMonths: 2.5, description: 'рззрзж рж╕ржкрзНрждрж╛рж╣' },
      { name: 'ржкрзЗржирзНржЯрж╛-рзй', ageMonths: 3.5, description: 'рззрзк рж╕ржкрзНрждрж╛рж╣' },
      { name: 'ржПржоржЖрж░-рзз', ageMonths: 9, description: 'рзп ржорж╛рж╕' },
      { name: 'ржПржоржЖрж░-рзи', ageMonths: 15, description: 'рззрзл ржорж╛рж╕' }
    ];

    const symptoms = [
      {
        title: 'ржбрж╛ржпрж╝рж░рж┐ржпрж╝рж╛ + рж░ржХрзНржд + рзй ржжрж┐ржи',
        description: 'ржкрж╛рждрж▓рж╛ ржкрж╛ржпрж╝ржЦрж╛ржирж╛рж░ рж╕рж╛ржерзЗ рж░ржХрзНржд ржЧрзЗрж▓рзЗ ржПржмржВ рзй ржжрж┐ржирзЗрж░ ржмрзЗрж╢рж┐ рж╣рж▓рзЗ',
        action: 'тЪая╕П ржЕржмрж┐рж▓ржорзНржмрзЗ ржбрж╛ржХрзНрждрж╛рж░ ржжрзЗржЦрж╛ржи'
      },
      {
        title: 'ржЬрзНржмрж░ + ржорж╛ржерж╛ржмрзНржпржерж╛ + ржмржорж┐',
        description: 'рждрзАржмрзНрж░ ржЬрзНржмрж░рзЗрж░ рж╕рж╛ржерзЗ ржорж╛ржерж╛ржмрзНржпржерж╛ ржУ ржмржорж┐ рж╣рж▓рзЗ',
        action: 'тЪая╕П ржжрзНрж░рзБржд рж╣рж╛рж╕ржкрж╛рждрж╛рж▓рзЗ ржпрж╛ржи (ржбрзЗржЩрзНржЧрзБ/ржорзНржпрж╛рж▓рзЗрж░рж┐ржпрж╝рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ)'
      },
      {
        title: 'рж╢рзНржмрж╛рж╕ржХрж╖рзНржЯ + ржмрзБржХрзЗ ржмрзНржпржерж╛',
        description: 'рж╢рзНржмрж╛рж╕ ржирж┐рждрзЗ ржХрж╖рзНржЯ рж╣рж▓рзЗ ржПржмржВ ржмрзБржХрзЗ ржЪрж╛ржк ржЕржирзБржнржм ржХрж░рж▓рзЗ',
        action: 'ЁЯЪи ржЬрж░рзБрж░рж┐ ржнрж┐рждрзНрждрж┐рждрзЗ рж╣рж╛рж╕ржкрж╛рждрж╛рж▓рзЗ ржирж┐ржи'
      },
      {
        title: 'ржЧрж░рзНржнрж╛ржмрж╕рзНржерж╛ржпрж╝ рж░ржХрзНрждржкрж╛ржд',
        description: 'ржЧрж░рзНржнржХрж╛рж▓рзАржи ржпрзЗржХрзЛржирзЛ рж░ржХрзНрждржкрж╛ржд',
        action: 'ЁЯЪи ржЕржмрж┐рж▓ржорзНржмрзЗ рж╣рж╛рж╕ржкрж╛рждрж╛рж▓рзЗ ржпрж╛ржи'
      }
    ];

    const healthEvents = [
      {
        id: 'event1',
        title: 'ржмрж┐ржирж╛ржорзВрж▓рзНржпрзЗ рж╕рзНржмрж╛рж╕рзНржерзНржп ржХрзНржпрж╛ржорзНржк',
        date: 'рзирзл ржбрж┐рж╕рзЗржорзНржмрж░ рзирзжрзирзк',
        time: 'рж╕ржХрж╛рж▓ рзпржЯрж╛ - ржжрзБржкрзБрж░ рзиржЯрж╛',
        location: 'ржХрж▓рж╛ржкрж╛ржбрж╝рж╛ ржЙржкржЬрзЗрж▓рж╛ ржкрж░рж┐рж╖ржж',
        division: 'ржмрж░рж┐рж╢рж╛рж▓',
        zilla: 'ржкржЯрзБржпрж╝рж╛ржЦрж╛рж▓рзА',
        upazila: 'ржХрж▓рж╛ржкрж╛ржбрж╝рж╛',
        organizer: 'ржмрзНрж░рзНржпрж╛ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп ржХрж░рзНржорж╕рзВржЪрзА',
        services: 'рж╕рж╛ржзрж╛рж░ржг ржЪрж┐ржХрж┐рзОрж╕рж╛, рж░ржХрзНрждржЪрж╛ржк ржкрж░рзАржХрзНрж╖рж╛, ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕ ржкрж░рзАржХрзНрж╖рж╛'
      },
      {
        id: 'event2',
        title: 'рж░ржХрзНрждржжрж╛ржи ржХрж░рзНржорж╕рзВржЪрзА',
        date: 'рзйрзж ржбрж┐рж╕рзЗржорзНржмрж░ рзирзжрзирзк',
        time: 'рж╕ржХрж╛рж▓ рззрзжржЯрж╛ - ржмрж┐ржХрж╛рж▓ рзкржЯрж╛',
        location: 'ржзрж╛ржорж░рж╛ржЗ ржХрж▓рзЗржЬ ржорж╛ржа',
        division: 'ржврж╛ржХрж╛',
        zilla: 'ржврж╛ржХрж╛',
        upazila: 'ржзрж╛ржорж░рж╛ржЗ',
        organizer: 'ржХрзЛржпрж╝рж╛ржирзНржЯрж╛ржо ржлрж╛ржЙржирзНржбрзЗрж╢ржи',
        services: 'рж╕рзНржмрзЗржЪрзНржЫрж╛ржпрж╝ рж░ржХрзНрждржжрж╛ржи'
      },
      {
        id: 'event3',
        title: 'ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕ржЪрзЗрждржирждрж╛ рж╕ржнрж╛',
        date: 'рзл ржЬрж╛ржирзБржпрж╝рж╛рж░рж┐ рзирзжрзирзл',
        time: 'ржмрж┐ржХрж╛рж▓ рзйржЯрж╛ - рж╕ржирзНржзрзНржпрж╛ рзмржЯрж╛',
        location: 'ржЧрж╛ржЬрзАржкрзБрж░ рж╕ржжрж░ ржХржорж┐ржЙржирж┐ржЯрж┐ рж╕рзЗржирзНржЯрж╛рж░',
        division: 'ржврж╛ржХрж╛',
        zilla: 'ржЧрж╛ржЬрзАржкрзБрж░',
        upazila: 'ржЧрж╛ржЬрзАржкрзБрж░ рж╕ржжрж░',
        organizer: 'ржоржирзЗрж░ ржмржирзНржзрзБ',
        services: 'ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп ржкрж░рж╛ржорж░рзНрж╢, ржоржирзЛржмрж┐ржжрзЗрж░ рж╕рж╛ржерзЗ ржХржерж╛'
      }
    ];

    const healthWorkers = [
      {
        name: 'рж░рж╣рж┐ржорж╛ ржЦрж╛рждрзБржи',
        division: 'ржмрж░рж┐рж╢рж╛рж▓',
        zilla: 'ржкржЯрзБржпрж╝рж╛ржЦрж╛рж▓рзА',
        upazila: 'ржХрж▓рж╛ржкрж╛ржбрж╝рж╛',
        union: 'ржЪрж░ ржХрж▓рж╛ржкрж╛ржбрж╝рж╛',
        skills: ['ржорж╛ ржУ рж╢рж┐рж╢рзБ рж╕рзНржмрж╛рж╕рзНржерзНржп', 'ржЯрж┐ржХрж╛ржжрж╛ржи', 'ржкрж░рж┐ржмрж╛рж░ ржкрж░рж┐ржХрж▓рзНржкржирж╛'],
        training: 'ржмрзНрж░рзНржпрж╛ржХ ржкрзНрж░рж╢рж┐ржХрзНрж╖рж┐ржд',
        contact: 'ржЧрзНрж░рж╛ржорзЗрж░ ржорж╕ржЬрж┐ржжрзЗрж░ ржкрж╛рж╢рзЗ',
        phone: 'рзжрззрзнрззрзирзйрзкрзлрзмрзнрзо'
      },
      {
        name: 'ржХрж░рж┐ржо ржорж┐ржпрж╝рж╛',
        division: 'ржврж╛ржХрж╛',
        zilla: 'ржврж╛ржХрж╛',
        upazila: 'ржзрж╛ржорж░рж╛ржЗ',
        union: 'ржзрж╛ржорж░рж╛ржЗ рж╕ржжрж░',
        skills: ['ржкрзНрж░рж╛ржержорж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛', 'ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп', 'ржЬрж░рзБрж░рж┐ рж╕рзЗржмрж╛'],
        training: 'ржЖрж╢рж╛ ржкрзНрж░рж╢рж┐ржХрзНрж╖рж┐ржд',
        contact: 'ржмрж╛ржЬрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ ржирзАрж▓ ржмрж╛ржбрж╝рж┐',
        phone: 'рзжрззрзорзпрзорзнрзмрзлрзкрзйрзи'
      },
      {
        name: 'рж╕рж╛рж▓ржорж╛ ржмрзЗржЧржо',
        division: 'ржврж╛ржХрж╛',
        zilla: 'ржЧрж╛ржЬрзАржкрзБрж░',
        upazila: 'ржХрж╛рж▓рж┐ржпрж╝рж╛ржХрзИрж░',
        union: 'рж░рж╛ржЬрж╛ржмрж╛ржбрж╝рзА',
        skills: ['ржорж╛ ржУ рж╢рж┐рж╢рзБ рж╕рзНржмрж╛рж╕рзНржерзНржп', 'ржкрзБрж╖рзНржЯрж┐ ржкрж░рж╛ржорж░рзНрж╢', 'ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп'],
        training: 'рж╕рзЗржн ржжрзНржп ржЪрж┐рж▓ржбрзНрж░рзЗржи ржкрзНрж░рж╢рж┐ржХрзНрж╖рж┐ржд',
        contact: 'рж╕рзНржХрзБрж▓рзЗрж░ ржкрж╛рж╢рзЗ рж╕ржмрзБржЬ ржмрж╛ржбрж╝рж┐',
        phone: 'рзжрззрзлрзлрзлрззрзирзйрзкрзлрзм'
      }
    ];

    // Data handler
    let allData = [];
    const dataHandler = {
      onDataChanged(data) {
        allData = data;
        console.log('Data updated:', data.length, 'records');
        
        // Update mood history if modal is open and showing mental health
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modalTitle');
        if (modal.classList.contains('active') && modalTitle.textContent === 'ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп ржЪрзЗржХ-ржЗржи') {
          updateMoodHistory();
        }
        
        // Update admin stats if showing
        if (modal.classList.contains('active') && modalTitle.textContent === 'ржбрзЗржЯрж╛ рж░рж┐ржкрзЛрж░рзНржЯ') {
          updateAdminStats();
        }
        
        // Update saved alerts if showing seasonal tips
        if (modal.classList.contains('active') && modalTitle.textContent === 'ржЛрждрзБ ржЕржирзБржпрж╛ржпрж╝рзА ржкрж░рж╛ржорж░рзНрж╢') {
          updateSavedAlerts();
        }
      }
    };

    // Initialize SDK
    async function initializeApp() {
      const initResult = await window.dataSdk.init(dataHandler);
      if (!initResult.isOk) {
        console.error('Failed to initialize data SDK');
      }
      
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            const title = config.app_title || defaultConfig.app_title;
            const message = config.welcome_message || defaultConfig.welcome_message;
            
            const titleElement = document.getElementById('appTitle');
            const messageElement = document.getElementById('welcomeMessage');
            
            if (titleElement) titleElement.textContent = title;
            if (messageElement) messageElement.textContent = message;
          },
          mapToCapabilities: (config) => ({
            recolorables: [],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ['app_title', config.app_title || defaultConfig.app_title],
            ['welcome_message', config.welcome_message || defaultConfig.welcome_message]
          ])
        });
      }
      
      renderDashboard();
      setupAnonymousToggle();
    }

    function setupAnonymousToggle() {
      const anonymousToggle = document.getElementById('anonymousToggle');
      anonymousToggle.onclick = () => {
        isAnonymous = !isAnonymous;
        if (isAnonymous) {
          anonymousToggle.classList.add('active');
          currentUserMode = 'anonymous';
          showToast('ржЧрзЛржкржи ржорзЛржб ржЪрж╛рж▓рзБ - рж╕ржорзНржкрзВрж░рзНржг ржЧрзЛржкржирзАржпрж╝рждрж╛ ржирж┐рж╢рзНржЪрж┐ржд');
        } else {
          anonymousToggle.classList.remove('active');
          currentUserMode = isAdmin ? 'admin' : 'guest';
          showToast('ржЧрзЛржкржи ржорзЛржб ржмржирзНржз');
        }
      };
    }

    function renderDashboard() {
      const dashboard = document.getElementById('dashboard');
      dashboard.innerHTML = '';
      
      features.forEach(feature => {
        if (feature.adminOnly && !isAdmin) return;
        
        const card = document.createElement('div');
        card.className = 'feature-card';
        card.innerHTML = `
          <div class="feature-icon">${feature.icon}</div>
          <h3 class="feature-title">${feature.title}</h3>
          <p class="feature-desc">${feature.desc}</p>
        `;
        card.onclick = () => openFeature(feature.id);
        dashboard.appendChild(card);
      });
    }

    function openFeature(featureId) {
      const modal = document.getElementById('modal');
      const modalTitle = document.getElementById('modalTitle');
      const modalBody = document.getElementById('modalBody');
      
      const feature = features.find(f => f.id === featureId);
      modalTitle.textContent = feature.title;
      
      
      switch(featureId) {
        case 'mental-health':
          renderMentalHealthCheckin(modalBody);
          break;
        case 'health-map':
          renderHealthMap(modalBody);
          break;
        case 'anonymous-help':
          renderAnonymousHelp(modalBody);
          break;
        case 'seasonal-tips':
          renderSeasonalTips(modalBody);
          break;
        case 'maternal-child':
          renderMaternalChild(modalBody);
          break;
        case 'symptom-guide':
          renderSymptomGuide(modalBody);
          break;
        case 'health-events':
          renderHealthEvents(modalBody);
          break;
        case 'health-workers':
          renderHealthWorkers(modalBody);
          break;
        case 'admin-stats':
          renderAdminStats(modalBody);
          break;
      }
      
      modal.classList.add('active');
    }

    function renderMentalHealthCheckin(container) {
      container.innerHTML = `
        <div class="form-group">
          <label class="form-label">ржЖржЬ ржЖржкржирж╛рж░ ржоржи ржХрзЗржоржи?</label>
          <div class="mood-selector">
            <div class="mood-option" data-mood="ржЦрзБржм ржЦрж╛рж░рж╛ржк">
              <span class="mood-emoji">ЁЯШв</span>
              <span class="mood-label">ржЦрзБржм ржЦрж╛рж░рж╛ржк</span>
            </div>
            <div class="mood-option" data-mood="ржЦрж╛рж░рж╛ржк">
              <span class="mood-emoji">ЁЯШЯ</span>
              <span class="mood-label">ржЦрж╛рж░рж╛ржк</span>
            </div>
            <div class="mood-option" data-mood="ржарж┐ржХ ржЖржЫрзЗ">
              <span class="mood-emoji">ЁЯШР</span>
              <span class="mood-label">ржарж┐ржХ ржЖржЫрзЗ</span>
            </div>
            <div class="mood-option" data-mood="ржнрж╛рж▓рзЛ">
              <span class="mood-emoji">ЁЯЩВ</span>
              <span class="mood-label">ржнрж╛рж▓рзЛ</span>
            </div>
            <div class="mood-option" data-mood="ржЦрзБржм ржнрж╛рж▓рзЛ">
              <span class="mood-emoji">ЁЯШК</span>
              <span class="mood-label">ржЦрзБржм ржнрж╛рж▓рзЛ</span>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">ржорж╛ржирж╕рж┐ржХ ржЪрж╛ржк ржХрждржЯрзБржХрзБ? (рзз-рззрзж)</label>
          <input type="range" min="1" max="10" value="5" class="stress-slider" id="stressSlider">
          <div class="stress-value" id="stressValue">рзл</div>
        </div>
        
        <div class="form-group">
          <label class="form-label">ржХрж┐ржЫрзБ ржмрж▓рждрзЗ ржЪрж╛ржи? (ржРржЪрзНржЫрж┐ржХ)</label>
          <textarea class="form-textarea" id="moodNotes" placeholder="ржЖржЬржХрзЗрж░ ржжрж┐ржиржЯрж╛ ржХрзЗржоржи ржЧрзЗрж▓..."></textarea>
        </div>
        
        <button class="btn-submit" id="saveMoodBtn">рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</button>
        
        <div style="margin-top: 30px;">
          <h3 style="color: #2e7d32; margin-bottom: 15px;">ржЖржкржирж╛рж░ ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржпрзЗрж░ ржЗрждрж┐рж╣рж╛рж╕</h3>
          <div id="moodHistory"></div>
        </div>
      `;
      
      const moodOptions = container.querySelectorAll('.mood-option');
      moodOptions.forEach(option => {
        option.onclick = () => {
          moodOptions.forEach(o => o.classList.remove('selected'));
          option.classList.add('selected');
          selectedMood = option.dataset.mood;
        };
      });
      
      const stressSlider = document.getElementById('stressSlider');
      const stressValue = document.getElementById('stressValue');
      stressSlider.oninput = (e) => {
        stressLevel = parseInt(e.target.value);
        stressValue.textContent = stressLevel;
      };
      
      document.getElementById('saveMoodBtn').onclick = async () => {
        if (!selectedMood) {
          showToast('ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЖржкржирж╛рж░ ржорзЗржЬрж╛ржЬ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи');
          return;
        }
        
        const btn = document.getElementById('saveMoodBtn');
        btn.disabled = true;
        btn.textContent = 'рж╕ржВрж░ржХрзНрж╖ржг рж╣ржЪрзНржЫрзЗ...';
        
        const result = await window.dataSdk.create({
          id: Date.now().toString(),
          type: 'mood',
          date: new Date().toISOString(),
          mood: selectedMood,
          stress_level: stressLevel,
          notes: document.getElementById('moodNotes').value,
          user_mode: currentUserMode
        });
        
        btn.disabled = false;
        btn.textContent = 'рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи';
        
        if (result.isOk) {
          showToast('ржЖржкржирж╛рж░ ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп рж░рзЗржХрж░рзНржб рж╕ржВрж░ржХрзНрж╖рж┐ржд рж╣ржпрж╝рзЗржЫрзЗ');
          selectedMood = '';
          stressLevel = 5;
          document.getElementById('moodNotes').value = '';
          moodOptions.forEach(o => o.classList.remove('selected'));
          stressSlider.value = 5;
          stressValue.textContent = 'рзл';
        } else {
          showToast('рж╕ржВрж░ржХрзНрж╖ржгрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи');
        }
      };
      
      // Load initial mood history
      updateMoodHistory();
    }
    
    function updateMoodHistory() {
      const historyDiv = document.getElementById('moodHistory');
      if (!historyDiv) return;
      
      const moodRecords = allData.filter(record => record.type === 'mood')
        .sort((a, b) => new Date(b.date) - new Date(a.date))
        .slice(0, 10); // Show last 10 records
      
      if (moodRecords.length === 0) {
        historyDiv.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">ЁЯУЭ</div>
            <p class="empty-text">ржПржЦржирзЛ ржХрзЛржирзЛ рж░рзЗржХрж░рзНржб ржирзЗржЗред ржкрзНрж░ржержо ржЪрзЗржХ-ржЗржи ржХрж░рзБржи!</p>
          </div>
        `;
      } else {
        historyDiv.innerHTML = `
          <div class="history-list">
            ${moodRecords.map(record => {
              const date = new Date(record.date);
              const formattedDate = date.toLocaleDateString('bn-BD', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
              });
              const formattedTime = date.toLocaleTimeString('bn-BD', {
                hour: '2-digit',
                minute: '2-digit'
              });
              
              const moodEmoji = getMoodEmoji(record.mood);
              const stressColor = getStressColor(record.stress_level);
              
              return `
                <div class="history-item">
                  <div class="history-date">${formattedDate} - ${formattedTime}</div>
                  <div class="history-mood">
                    ${moodEmoji} ${record.mood} 
                    <span style="color: ${stressColor}; margin-left: 10px;">
                      ржЪрж╛ржк: ${record.stress_level}/рззрзж
                    </span>
                  </div>
                  ${record.notes ? `<div style="font-size: 14px; color: #666; margin-top: 5px; font-style: italic;">"${record.notes}"</div>` : ''}
                </div>
              `;
            }).join('')}
          </div>
        `;
      }
    }
    
    function getMoodEmoji(mood) {
      const moodEmojis = {
        'ржЦрзБржм ржЦрж╛рж░рж╛ржк': 'ЁЯШв',
        'ржЦрж╛рж░рж╛ржк': 'ЁЯШЯ',
        'ржарж┐ржХ ржЖржЫрзЗ': 'ЁЯШР',
        'ржнрж╛рж▓рзЛ': 'ЁЯЩВ',
        'ржЦрзБржм ржнрж╛рж▓рзЛ': 'ЁЯШК'
      };
      return moodEmojis[mood] || 'ЁЯШР';
    }
    
    function getStressColor(level) {
      if (level <= 3) return '#4caf50'; // Green
      if (level <= 6) return '#ff9800'; // Orange
      return '#f44336'; // Red
    }

  

      function renderHealthMap(container) {
      container.innerHTML = `
        <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #1976d2;">
          <h3 style="color: #0d47a1; margin: 0 0 10px 0;">ЁЯУН GPS ржирж╛ржЗ? рж╕ржорж╕рзНржпрж╛ ржирж╛ржЗ!</h3>
          <p style="margin: 0; color: #666; line-height: 1.6;">
            ржЖржкржирж╛рж░ ржЙржкржЬрзЗрж▓рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи тАФ ржирж┐ржХржЯрж╕рзНрже рж╕рзНржмрж╛рж╕рзНржерзНржпрж╕рзЗржмрж╛ ржорзНржпрж╛ржкрзЗ ржжрзЗржЦрж╛ржирзЛ рж╣ржмрзЗред
          </p>
        </div>

        <div class="filter-group" style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px;">
          <select class="form-select" id="divisionFilter" style="flex:1;min-width:160px;">
            <option value="">ржмрж┐ржнрж╛ржЧ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>
            ${divisions.map(d => `<option value="${d}">${d}</option>`).join('')}
          </select>
          <select class="form-select" id="zillaFilter" style="flex:1;min-width:160px;">
            <option value="">ржЬрзЗрж▓рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>
          </select>
          <select class="form-select" id="upazilaFilter" style="flex:1;min-width:160px;">
            <option value="">ржЙржкржЬрзЗрж▓рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>
          </select>
        </div>

        <div id="healthMap" style="height: 360px; border-radius:8px; overflow:hidden; margin-bottom:12px; background:#f0f0f0;"></div>

        <div id="facilityList" class="facility-list"></div>
      `;

      const divisionFilter = document.getElementById('divisionFilter');
      const zillaFilter = document.getElementById('zillaFilter');
      const upazilaFilter = document.getElementById('upazilaFilter');

      // Initialize Leaflet map once and keep references on window
      if (!window.healthMap) {
        // center on Bangladesh
        window.healthMap = L.map('healthMap', { scrollWheelZoom: false }).setView([23.6850, 90.3563], 7);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19,
          attribution: '┬й OpenStreetMap'
        }).addTo(window.healthMap);
        window.healthMarkers = L.layerGroup().addTo(window.healthMap);
      } else {
        // when modal reopens Leaflet needs invalidateSize
        setTimeout(() => window.healthMap.invalidateSize(), 250);
      }

      // Lightweight coordinates table for known facilities (extend as needed)
      const facilityCoords = {
        'ржХрж▓рж╛ржкрж╛ржбрж╝рж╛ ржЙржкржЬрзЗрж▓рж╛ рж╕рзНржмрж╛рж╕рзНржерзНржп ржХржоржкрзНрж▓рзЗржХрзНрж╕': [21.8833, 90.2167],
        'ржЪрж░ ржХрж▓рж╛ржкрж╛ржбрж╝рж╛ ржХржорж┐ржЙржирж┐ржЯрж┐ ржХрзНрж▓рж┐ржирж┐ржХ': [21.8700, 90.2000],
        'ржзрж╛ржорж░рж╛ржЗ ржЙржкржЬрзЗрж▓рж╛ рж╕рзНржмрж╛рж╕рзНржерзНржп ржХржоржкрзНрж▓рзЗржХрзНрж╕': [24.0586, 90.1956]
      };

      divisionFilter.onchange = () => {
        const division = divisionFilter.value;
        zillaFilter.innerHTML = '<option value="">ржЬрзЗрж▓рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>';
        upazilaFilter.innerHTML = '<option value="">ржЙржкржЬрзЗрж▓рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>';
        if (division && zillasByDivision[division]) {
          zillasByDivision[division].forEach(z => zillaFilter.innerHTML += `<option value="${z}">${z}</option>`);
        }
        updateFacilityList();
      };

      zillaFilter.onchange = () => {
        const zilla = zillaFilter.value;
        upazilaFilter.innerHTML = '<option value="">ржЙржкржЬрзЗрж▓рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>';
        if (zilla && upazilasByZilla[zilla]) {
          upazilasByZilla[zilla].forEach(u => upazilaFilter.innerHTML += `<option value="${u}">${u}</option>`);
        }
        updateFacilityList();
      };

      upazilaFilter.onchange = updateFacilityList;

      function updateFacilityList() {
        const division = divisionFilter.value;
        const zilla = zillaFilter.value;
        const upazila = upazilaFilter.value;

        let filtered = healthFacilities;
        if (division) filtered = filtered.filter(f => f.division === division);
        if (zilla) filtered = filtered.filter(f => f.zilla === zilla);
        if (upazila) filtered = filtered.filter(f => f.upazila === upazila);

        const facilityList = document.getElementById('facilityList');

        // render list with map buttons
        if (filtered.length === 0) {
          facilityList.innerHTML = `
            <div class="empty-state">
              <div class="empty-icon">ЁЯПе</div>
              <p class="empty-text">ржПржЗ ржПрж▓рж╛ржХрж╛ржпрж╝ ржХрзЛржирзЛ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рзЗржмрж╛ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐</p>
            </div>
          `;
        } else {
          facilityList.innerHTML = filtered.map((f, idx) => `
            <div class="facility-item" style="padding:10px;border-radius:8px;border:1px solid #eee;margin-bottom:8px;display:flex;justify-content:space-between;align-items:flex-start;">
              <div>
                <h4 style="margin:0 0 6px 0;font-size:16px;">${f.name}</h4>
                <div style="color:#666;font-size:13px;">${f.upazila}, ${f.zilla}, ${f.division}</div>
                <div style="color:#444;font-size:13px;margin-top:6px;"><strong>рж╕рзЗржмрж╛:</strong> ${f.services}</div>
                <div style="color:#444;font-size:13px;"><strong>рж╕ржоржпрж╝:</strong> ${f.schedule}</div>
              </div>
              <div style="display:flex;flex-direction:column;gap:6px;margin-left:12px;">
                <button class="btn btn-primary btn-small open-on-map" data-name="${encodeURIComponent(f.name)}" style="min-width:110px;">ржорж╛ржиржЪрж┐рждрзНрж░рзЗ ржжрзЗржЦрзБржи</button>
                <a class="btn btn-small" href="https://www.google.com/search?q=${encodeURIComponent(f.name + ' ' + f.upazila)}" target="_blank" style="text-decoration:none;text-align:center;padding:6px;border-radius:6px;background:#f5f5f5;color:#333;">ржЖрж░ржУ</a>
              </div>
            </div>
          `).join('');
        }

        updateMapMarkers(filtered);
      }

      function updateMapMarkers(list) {
        if (!window.healthMarkers) return;
        window.healthMarkers.clearLayers();
        const bounds = [];

        list.forEach(f => {
          const coords = facilityCoords[f.name];
          if (coords) {
            const marker = L.marker(coords).addTo(window.healthMarkers);
            marker.bindPopup(`<strong>${f.name}</strong><br>${f.upazila}, ${f.zilla}<br><small>${f.services}</small>`);
            bounds.push(coords);
          }
        });

        if (bounds.length > 0) {
          window.healthMap.fitBounds(bounds, { padding: [40, 40] });
        } else {
          window.healthMap.setView([23.6850, 90.3563], 7);
        }

        // wire "ржорж╛ржиржЪрж┐рждрзНрж░рзЗ ржжрзЗржЦрзБржи" buttons
        const openButtons = container.querySelectorAll('.open-on-map');
        openButtons.forEach(btn => {
          btn.onclick = () => {
            const name = decodeURIComponent(btn.dataset.name || '');
            const coords = facilityCoords[name];
            if (coords) {
              window.healthMap.setView(coords, 14);
              window.healthMarkers.eachLayer(layer => {
                if (layer.getLatLng && Math.abs(layer.getLatLng().lat - coords[0]) < 0.0001 && Math.abs(layer.getLatLng().lng - coords[1]) < 0.0001) {
                  layer.openPopup();
                }
              });
            } else {
              showToast('ржПржЗ рж╕рзБржмрж┐ржзрж╛рж░ ржЬржирзНржп ржЕржмрж╕рзНржерж╛ржи рждржерзНржп ржирзЗржЗ');
            }
          };
        });
      }

      // initial render
      updateFacilityList();
    }

    function renderAnonymousHelp(container) {
      container.innerHTML = `
        <div style="background: #ffebee; padding: 20px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #f44336;">
          <h3 style="color: #d32f2f; margin: 0 0 15px 0;">ЁЯЪи ржЬрж░рзБрж░рж┐ рж╕рждрж░рзНржХрждрж╛:</h3>
          <p style="margin: 0 0 15px 0; color: #666; line-height: 1.6; font-weight: 600;">
            ржпржжрж┐ ржЖржкржирж┐ ржмрж╛ ржХрзЗржЙ рждрж╛рзОржХрзНрж╖ржгрж┐ржХ ржмрж┐ржкржжрзЗ ржерж╛ржХрзЗржи, ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ рзпрзпрзп ржиржорзНржмрж░рзЗ ржХрж▓ ржХрж░рзБржи ржмрж╛ ржирж┐ржХржЯрж╕рзНрже ржерж╛ржирж╛ржпрж╝ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рзБржиред
          </p>
          
          <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
            <h4 style="color: #d32f2f; margin: 0 0 10px 0; font-size: 16px;">ЁЯУЮ ржЬрж░рзБрж░рж┐ ржпрзЛржЧрж╛ржпрзЛржЧ</h4>
            <div style="display: grid; gap: 8px;">
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px; background: #f5f5f5; border-radius: 5px;">
                <span style="color: #333; font-size: 14px;">ржЬрж╛рждрзАржпрж╝ ржЬрж░рзБрж░рж┐ рж╕рзЗржмрж╛:</span>
                <a href="tel:999" style="color: #d32f2f; font-weight: bold; text-decoration: none; font-size: 16px;">рзпрзпрзп</a>
              </div>
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px; background: #f5f5f5; border-radius: 5px;">
                <span style="color: #333; font-size: 14px;">ржирж╛рж░рзА ржУ рж╢рж┐рж╢рзБ ржирж┐рж░рзНржпрж╛рждржи ржкрзНрж░рждрж┐рж░рзЛржз:</span>
                <a href="tel:109" style="color: #d32f2f; font-weight: bold; text-decoration: none; font-size: 16px;">рззрзжрзп</a>
              </div>
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px; background: #f5f5f5; border-radius: 5px;">
                <span style="color: #333; font-size: 14px;">ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╣рзЗрж▓рзНржкрж▓рж╛ржЗржи:</span>
                <a href="tel:09612344444" style="color: #d32f2f; font-weight: bold; text-decoration: none; font-size: 16px;">рзжрзпрзмрззрзирзйрзкрзкрзкрзкрзк</a>
              </div>
            </div>
          </div>
        </div>
        
        <div style="background: #fff3e0; padding: 20px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #f57c00;">
          <h3 style="color: #e65100; margin: 0 0 10px 0;">ЁЯФТ рж╕ржорзНржкрзВрж░рзНржг ржЧрзЛржкржирзАржпрж╝рждрж╛ ржирж┐рж╢рзНржЪрж┐ржд</h3>
          <p style="margin: 0; color: #666; line-height: 1.6;">
            ржЖржкржирж╛рж░ ржирж╛ржо, ржлрзЛржи ржиржорзНржмрж░ ржмрж╛ ржХрзЛржирзЛ ржмрзНржпржХрзНрждрж┐ржЧржд рждржерзНржп рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣ржмрзЗ ржирж╛ред 
            ржЖржкржирж╛рж░ ржмрж╛рж░рзНрждрж╛ рж╢рзБржзрзБржорж╛рждрзНрж░ ржкрзНрж░рж╢рж┐ржХрзНрж╖рж┐ржд рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА ржжрзЗржЦржмрзЗржиред 
            рзкрзо ржШржгрзНржЯрж╛рж░ ржоржзрзНржпрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржкрж╛ржмрзЗржиред
          </p>
        </div>
        
        <div class="form-group">
          <label class="form-label">ржХрзЛржи ржзрж░ржирзЗрж░ рж╕рж╛рж╣рж╛ржпрзНржп ржжрж░ржХрж╛рж░?</label>
          <select class="form-select" id="helpCategory">
            <option value="">ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>
            <option value="ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп">ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп</option>
            <option value="ржкрж╛рж░рж┐ржмрж╛рж░рж┐ржХ рж╕ржорж╕рзНржпрж╛">ржкрж╛рж░рж┐ржмрж╛рж░рж┐ржХ рж╕ржорж╕рзНржпрж╛</option>
            <option value="рж╢рж╛рж░рзАрж░рж┐ржХ ржирж┐рж░рзНржпрж╛рждржи">рж╢рж╛рж░рзАрж░рж┐ржХ ржирж┐рж░рзНржпрж╛рждржи</option>
            <option value="ржпрзМржи рж╕рзНржмрж╛рж╕рзНржерзНржп">ржпрзМржи рж╕рзНржмрж╛рж╕рзНржерзНржп</option>
            <option value="ржЧрж░рзНржнржХрж╛рж▓рзАржи рж╕ржорж╕рзНржпрж╛">ржЧрж░рзНржнржХрж╛рж▓рзАржи рж╕ржорж╕рзНржпрж╛</option>
            <option value="ржЕржирзНржпрж╛ржирзНржп">ржЕржирзНржпрж╛ржирзНржп</option>
          </select>
        </div>
        
        <div class="form-group">
          <label class="form-label">ржЖржкржирж╛рж░ рж╕ржорж╕рзНржпрж╛ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рж▓рж┐ржЦрзБржи</label>
          <textarea class="form-textarea" id="helpMessage" placeholder="ржЖржкржирж╛рж░ рж╕ржорж╕рзНржпрж╛ ржПржЦрж╛ржирзЗ рж▓рж┐ржЦрзБржи... ржоржирзЗ рж░рж╛ржЦржмрзЗржи, ржПржЯрж┐ рж╕ржорзНржкрзВрж░рзНржг ржЧрзЛржкржирзАржпрж╝" style="min-height: 150px;"></textarea>
        </div>
        

        
        <button class="btn-submit" id="submitHelpBtn">ржЧрзЛржкржирзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржЪрж╛ржи</button>
      `;
      
      document.getElementById('submitHelpBtn').onclick = async () => {
        const category = document.getElementById('helpCategory').value;
        const message = document.getElementById('helpMessage').value;
        
        if (!category || !message.trim()) {
          showToast('ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ рж╕ржорж╕рзНржпрж╛рж░ ржзрж░ржи ржПржмржВ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рж▓рж┐ржЦрзБржи');
          return;
        }
        
        const btn = document.getElementById('submitHelpBtn');
        btn.disabled = true;
        btn.textContent = 'ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗ...';
        
        const result = await window.dataSdk.create({
          id: Date.now().toString(),
          type: 'help_request',
          date: new Date().toISOString(),
          help_category: category,
          help_request: message,
          help_status: 'pending',
          user_mode: 'anonymous'
        });
        
        btn.disabled = false;
        btn.textContent = 'ржЧрзЛржкржирзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржЪрж╛ржи';
        
        if (result.isOk) {
          showToast('ржЖржкржирж╛рж░ ржмрж╛рж░рзНрждрж╛ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗред рзкрзо ржШржгрзНржЯрж╛рж░ ржоржзрзНржпрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржкрж╛ржмрзЗржиред');
          document.getElementById('helpCategory').value = '';
          document.getElementById('helpMessage').value = '';
          document.getElementById('helpUpazila').value = '';
        } else {
          showToast('ржкрж╛ржарж╛рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи');
        }
      };
    }

    function renderSeasonalTips(container) {
      container.innerHTML = `
        <div class="season-tabs">
          <div class="season-tab active" data-season="monsoon">ЁЯМзя╕П ржмрж░рзНрж╖рж╛</div>
          <div class="season-tab" data-season="winter">тЭДя╕П рж╢рзАржд</div>
          <div class="season-tab" data-season="summer">тШАя╕П ржЧрзНрж░рзАрж╖рзНржо</div>
          <div class="season-tab" data-season="yearround">ЁЯФД рж╕рж╛рж░рж╛ ржмржЫрж░</div>
        </div>
        
        <!-- Monthly Alert Section -->
        <div id="monthlyAlert" style="margin-bottom: 25px;"></div>
        
        <!-- Tips Grid -->
        <div class="tips-grid" id="tipsGrid"></div>
      `;
      
      const tabs = container.querySelectorAll('.season-tab');
      tabs.forEach(tab => {
        tab.onclick = () => {
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          currentSeason = tab.dataset.season;
          updateTips();
        };
      });
      
      function updateTips() {
        const seasonData = seasonalTips[currentSeason];
        const monthlyAlertDiv = document.getElementById('monthlyAlert');
        const tipsGrid = document.getElementById('tipsGrid');
        
        // Display monthly alert
        if (seasonData.monthlyAlert) {
          monthlyAlertDiv.innerHTML = `
            <div style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%); color: white; padding: 20px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);">
              <h3 style="margin: 0 0 10px 0; font-size: 20px; display: flex; align-items: center; gap: 10px;">
                ${seasonData.monthlyAlert.title}
                <span style="background: rgba(255,255,255,0.2); padding: 5px 12px; border-radius: 15px; font-size: 14px;">${seasonData.monthlyAlert.date}</span>
              </h3>
              <p style="margin: 0; font-size: 16px; line-height: 1.6; opacity: 0.95;">
                ${seasonData.monthlyAlert.message}
              </p>
            </div>
          `;
        }
        
        // Display tips by priority
        let tipsHTML = '';
        
        // Critical tips first
        if (seasonData.critical && seasonData.critical.length > 0) {
          tipsHTML += `
            <div style="margin-bottom: 25px;">
              <h3 style="color: #d32f2f; margin: 0 0 15px 0; font-size: 18px; display: flex; align-items: center; gap: 8px;">
                ЁЯЪи ржЕрждрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рж╕рждрж░рзНржХрждрж╛
              </h3>
              <div style="display: grid; gap: 15px;">
                ${seasonData.critical.map(tip => `
                  <div style="background: #ffebee; padding: 20px; border-radius: 10px; border-left: 4px solid #f44336;">
                    <h4 style="color: #d32f2f; margin: 0 0 10px 0; font-size: 16px;">${tip.title}</h4>
                    <p style="margin: 0; color: #666; line-height: 1.6; font-size: 14px;">${tip.content}</p>
                  </div>
                `).join('')}
              </div>
            </div>
          `;
        }
        
        // Important tips
        if (seasonData.important && seasonData.important.length > 0) {
          tipsHTML += `
            <div style="margin-bottom: 25px;">
              <h3 style="color: #f57c00; margin: 0 0 15px 0; font-size: 18px; display: flex; align-items: center; gap: 8px;">
                тЪая╕П ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрж░рж╛ржорж░рзНрж╢
              </h3>
              <div style="display: grid; gap: 15px;">
                ${seasonData.important.map(tip => `
                  <div class="tip-card">
                    <h4 class="tip-title" style="font-size: 16px;">${tip.title}</h4>
                    <p class="tip-content">${tip.content}</p>
                  </div>
                `).join('')}
              </div>
            </div>
          `;
        }
        
        // Corona tips
        if (seasonData.corona && seasonData.corona.length > 0) {
          tipsHTML += `
            <div style="margin-bottom: 25px;">
              <h3 style="color: #1976d2; margin: 0 0 15px 0; font-size: 18px; display: flex; align-items: center; gap: 8px;">
                ЁЯШ╖ ржХрзЛржнрж┐ржб-рззрзп рж╕рждрж░рзНржХрждрж╛
              </h3>
              <div style="display: grid; gap: 15px;">
                ${seasonData.corona.map(tip => `
                  <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; border-left: 4px solid #1976d2;">
                    <h4 style="color: #1565c0; margin: 0 0 10px 0; font-size: 16px;">${tip.title}</h4>
                    <p style="margin: 0; color: #666; line-height: 1.6; font-size: 14px;">${tip.content}</p>
                  </div>
                `).join('')}
              </div>
            </div>
          `;
        }
        
        tipsGrid.innerHTML = tipsHTML;
        
        // Add save monthly alert functionality
        if (seasonData.monthlyAlert) {
          const alertDiv = monthlyAlertDiv.querySelector('div');
          if (alertDiv) {
            // Check if already saved
            const existingAlert = allData.find(record => 
              record.type === 'monthly_alert' && 
              record.season === currentSeason && 
              record.user_mode === currentUserMode
            );
            
            if (existingAlert) {
              alertDiv.innerHTML += `
                <button disabled style="background: rgba(76, 175, 80, 0.2); border: 2px solid rgba(76, 175, 80, 0.3); color: #2e7d32; padding: 10px 20px; border-radius: 20px; font-size: 14px; cursor: not-allowed; margin-top: 15px;">
                  тЬЕ рж╕ржВрж░ржХрзНрж╖рж┐ржд
                </button>
              `;
            } else {
              alertDiv.innerHTML += `
                <button onclick="saveMonthlyAlert('${currentSeason}')" style="background: rgba(255,255,255,0.2); border: 2px solid rgba(255,255,255,0.3); color: white; padding: 10px 20px; border-radius: 20px; font-size: 14px; cursor: pointer; margin-top: 15px; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                  ЁЯУ▒ ржорж╛рж╕рж┐ржХ рж╕рждрж░рзНржХрждрж╛ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи
                </button>
              `;
            }
          }
        }
        
        // Add saved alerts section
        tipsHTML += `
          <div style="margin-top: 30px;">
            <h3 style="color: #2e7d32; margin: 0 0 15px 0; font-size: 18px; display: flex; align-items: center; gap: 8px;">
              ЁЯУ▒ рж╕ржВрж░ржХрзНрж╖рж┐ржд рж╕рждрж░рзНржХрждрж╛
            </h3>
            <div id="savedAlerts"></div>
          </div>
        `;
        
        tipsGrid.innerHTML = tipsHTML;
        
        // Display saved alerts
        updateSavedAlerts();
      }
      
      updateTips();
    }
    
    // Function to update saved alerts display
    function updateSavedAlerts() {
      const savedAlertsDiv = document.getElementById('savedAlerts');
      if (!savedAlertsDiv) return;
      
      const savedAlerts = allData.filter(record => 
        record.type === 'monthly_alert' && 
        record.user_mode === currentUserMode
      ).sort((a, b) => new Date(b.date) - new Date(a.date));
      
      if (savedAlerts.length === 0) {
        savedAlertsDiv.innerHTML = `
          <div style="background: #f5f5f5; padding: 20px; border-radius: 10px; text-align: center; color: #999;">
            <div style="font-size: 48px; margin-bottom: 10px;">ЁЯУ▒</div>
            <p style="margin: 0; font-size: 16px;">ржПржЦржирзЛ ржХрзЛржирзЛ рж╕рждрж░рзНржХрждрж╛ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗржиржирж┐</p>
            <p style="margin: 5px 0 0 0; font-size: 14px;">ржЙржкрж░рзЗрж░ ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзЗ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</p>
          </div>
        `;
      } else {
        savedAlertsDiv.innerHTML = `
          <div style="display: grid; gap: 15px;">
            ${savedAlerts.map(alert => {
              const date = new Date(alert.date);
              const formattedDate = date.toLocaleDateString('bn-BD', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
              });
              
              const seasonNames = {
                'monsoon': 'ЁЯМзя╕П ржмрж░рзНрж╖рж╛',
                'winter': 'тЭДя╕П рж╢рзАржд',
                'summer': 'тШАя╕П ржЧрзНрж░рзАрж╖рзНржо',
                'yearround': 'ЁЯФД рж╕рж╛рж░рж╛ ржмржЫрж░'
              };
              
              return `
                <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; border-left: 4px solid #43a047;">
                  <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px;">
                    <h4 style="color: #2e7d32; margin: 0; font-size: 16px;">
                      ${seasonNames[alert.season] || alert.season}
                    </h4>
                    <span style="background: rgba(46, 125, 50, 0.1); color: #2e7d32; padding: 4px 8px; border-radius: 12px; font-size: 12px;">
                      ${formattedDate}
                    </span>
                  </div>
                  <h5 style="color: #1b5e20; margin: 0 0 8px 0; font-size: 14px;">${alert.alert_title}</h5>
                  <p style="margin: 0 0 8px 0; color: #666; font-size: 14px; line-height: 1.5;">${alert.alert_message}</p>
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px;">
                    <span style="color: #666; font-size: 12px;">ЁЯУЕ ${alert.alert_date_range}</span>
                    <button onclick="deleteAlert('${alert.__backendId}')" style="background: #ffebee; border: 1px solid #ffcdd2; color: #d32f2f; padding: 6px 12px; border-radius: 15px; font-size: 12px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.background='#ffcdd2'" onmouseout="this.style.background='#ffebee'">
                      ЁЯЧСя╕П ржорзБржЫрзБржи
                    </button>
                  </div>
                </div>
              `;
            }).join('')}
          </div>
        `;
      }
    }
    
    // Function to delete saved alert
    window.deleteAlert = async function(alertId) {
      const alertToDelete = allData.find(record => record.__backendId === alertId);
      if (!alertToDelete) return;
      
      const result = await window.dataSdk.delete(alertToDelete);
      
      if (result.isOk) {
        showToast('рж╕рждрж░рзНржХрждрж╛ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣ржпрж╝рзЗржЫрзЗ');
        // Refresh the current season view to update button state
        updateTips();
      } else {
        showToast('ржорзБржЫрждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи');
      }
    }
    
    // Function to save monthly alert
    window.saveMonthlyAlert = async function(season) {
      const seasonData = seasonalTips[season];
      if (!seasonData.monthlyAlert) return;
      
      // Check if already saved
      const existingAlert = allData.find(record => 
        record.type === 'monthly_alert' && 
        record.season === season && 
        record.user_mode === currentUserMode
      );
      
      if (existingAlert) {
        showToast('ржПржЗ ржЛрждрзБрж░ рж╕рждрж░рзНржХрждрж╛ ржЗрждрж┐ржоржзрзНржпрзЗ рж╕ржВрж░ржХрзНрж╖рж┐ржд ржЖржЫрзЗ!');
        return;
      }
      
      // Check data limit
      if (allData.length >= 999) {
        showToast('рж╕рж░рзНржмрзЛржЪрзНржЪ рзпрзпрзпржЯрж┐ рж░рзЗржХрж░рзНржбрзЗрж░ рж╕рзАржорж╛ ржкрзМржБржЫрзЗржЫрзЗред ржХрж┐ржЫрзБ ржкрзБрж░рж╛ржирзЛ рж░рзЗржХрж░рзНржб ржорзБржЫрзЗ ржирждрзБржи ржпрзЛржЧ ржХрж░рзБржиред');
        return;
      }
      
      const result = await window.dataSdk.create({
        id: Date.now().toString(),
        type: 'monthly_alert',
        date: new Date().toISOString(),
        season: season,
        alert_title: seasonData.monthlyAlert.title,
        alert_message: seasonData.monthlyAlert.message,
        alert_date_range: seasonData.monthlyAlert.date,
        user_mode: currentUserMode
      });
      
      if (result.isOk) {
        showToast('ржорж╛рж╕рж┐ржХ рж╕рждрж░рзНржХрждрж╛ рж╕ржВрж░ржХрзНрж╖рж┐ржд рж╣ржпрж╝рзЗржЫрзЗ! ржЖржкржирж┐ ржПржЯрж┐ ржкрж░рзЗ ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗржиред');
        
        // Update button to show saved state
        const saveBtn = document.querySelector(`button[onclick="saveMonthlyAlert('${season}')"]`);
        if (saveBtn) {
          saveBtn.innerHTML = 'тЬЕ рж╕ржВрж░ржХрзНрж╖рж┐ржд';
          saveBtn.style.background = 'rgba(76, 175, 80, 0.2)';
          saveBtn.style.borderColor = 'rgba(76, 175, 80, 0.3)';
          saveBtn.style.color = '#2e7d32';
          saveBtn.disabled = true;
          saveBtn.style.cursor = 'not-allowed';
        }
      } else {
        showToast('рж╕ржВрж░ржХрзНрж╖ржгрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи');
      }
    }

    function renderMaternalChild(container) {
      container.innerHTML = `
        <div class="season-tabs">
          <div class="season-tab active" data-section="mother">ЁЯСй ржорж╛ржпрж╝рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп</div>
          <div class="season-tab" data-section="child">ЁЯС╢ рж╢рж┐рж╢рзБрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп</div>
        </div>
        
        <div id="maternalContent">
          <!-- Content will be loaded here -->
        </div>
      `;
      
      const tabs = container.querySelectorAll('.season-tab');
      tabs.forEach(tab => {
        tab.onclick = () => {
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          const section = tab.dataset.section;
          if (section === 'mother') {
            renderMotherHealth();
          } else {
            renderChildHealth();
          }
        };
      });
      
      // Load mother health by default
      renderMotherHealth();
      
      function renderMotherHealth() {
        const content = document.getElementById('maternalContent');
        content.innerHTML = `
          <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #43a047;">
            <h3 style="color: #2e7d32; margin: 0 0 10px 0;">ЁЯСйтАНтЪХя╕П ржЧрж░рзНржнржХрж╛рж▓рзАржи ржпрждрзНржи</h3>
            <p style="margin: 0; color: #666; line-height: 1.6;">
              ржирж┐ржпрж╝ржорж┐ржд ржЪрзЗржХржЖржк ржХрж░рж╛ржиред рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржЦрж╛ржмрж╛рж░ ржЦрж╛ржиред ржкрж░рзНржпрж╛ржкрзНржд ржмрж┐рж╢рзНрж░рж╛ржо ржирж┐ржиред
            </p>
          </div>
          
          <div class="form-group">
            <label class="form-label">ржорж╛ржпрж╝рзЗрж░ ржирж╛ржо</label>
            <input type="text" class="form-input" id="motherName" placeholder="ржорж╛ржпрж╝рзЗрж░ ржирж╛ржо рж▓рж┐ржЦрзБржи">
          </div>
          
          <div class="form-group">
            <label class="form-label">ржЧрж░рзНржнржХрж╛рж▓рзАржи рж╕ржкрзНрждрж╛рж╣</label>
            <input type="number" class="form-input" id="pregnancyWeek" placeholder="ржХржд рж╕ржкрзНрждрж╛рж╣?" min="1" max="42">
          </div>
          
          <div class="form-group">
            <label class="form-label">ржУржЬржи (ржХрзЗржЬрж┐)</label>
            <input type="number" class="form-input" id="motherWeight" placeholder="ржмрж░рзНрждржорж╛ржи ржУржЬржи" step="0.1">
          </div>
          
          <div class="form-group">
            <label class="form-label">рж░ржХрзНрждржЪрж╛ржк</label>
            <input type="text" class="form-input" id="bloodPressure" placeholder="ржпрзЗржоржи: рззрзирзж/рзорзж">
          </div>
          
          <div class="form-group">
            <label class="form-label">рж╢рзЗрж╖ ржЪрзЗржХржЖржкрзЗрж░ рждрж╛рж░рж┐ржЦ</label>
            <input type="date" class="form-input" id="lastCheckup">
          </div>
          
          <div class="form-group">
            <label class="form-label">рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕ржорж╕рзНржпрж╛ (ржпржжрж┐ ржерж╛ржХрзЗ)</label>
            <textarea class="form-textarea" id="motherHealthIssues" placeholder="ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ ржмрж╛ ржЙржкрж╕рж░рзНржЧ ржерж╛ржХрж▓рзЗ рж▓рж┐ржЦрзБржи..."></textarea>
          </div>
          
          <button class="btn-submit" id="addMotherBtn">ржорж╛ржпрж╝рзЗрж░ рждржерзНржп рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</button>
          
          <div style="margin-top: 30px;">
            <h3 style="color: #2e7d32; margin-bottom: 15px;">ржорж╛ржпрж╝рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп рж░рзЗржХрж░рзНржб</h3>
            <div id="motherHistory"></div>
          </div>
        `;
        
        document.getElementById('addMotherBtn').onclick = async () => {
          const name = document.getElementById('motherName').value;
          const week = document.getElementById('pregnancyWeek').value;
          const weight = document.getElementById('motherWeight').value;
          const bp = document.getElementById('bloodPressure').value;
          const checkup = document.getElementById('lastCheckup').value;
          
          if (!name || !week) {
            showToast('ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржорж╛ржпрж╝рзЗрж░ ржирж╛ржо ржПржмржВ ржЧрж░рзНржнржХрж╛рж▓рзАржи рж╕ржкрзНрждрж╛рж╣ ржжрж┐ржи');
            return;
          }
          
          const btn = document.getElementById('addMotherBtn');
          btn.disabled = true;
          btn.textContent = 'рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...';
          
          const result = await window.dataSdk.create({
            id: Date.now().toString(),
            type: 'mother_health',
            date: new Date().toISOString(),
            mother_name: name,
            pregnancy_week: parseInt(week),
            weight: weight ? parseFloat(weight) : null,
            blood_pressure: bp,
            last_checkup: checkup,
            health_issues: document.getElementById('motherHealthIssues').value,
            user_mode: currentUserMode
          });
          
          btn.disabled = false;
          btn.textContent = 'ржорж╛ржпрж╝рзЗрж░ рждржерзНржп рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи';
          
          if (result.isOk) {
            showToast('ржорж╛ржпрж╝рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп рждржерзНржп рж╕ржВрж░ржХрзНрж╖рж┐ржд рж╣ржпрж╝рзЗржЫрзЗ');
            // Clear form
            document.getElementById('motherName').value = '';
            document.getElementById('pregnancyWeek').value = '';
            document.getElementById('motherWeight').value = '';
            document.getElementById('bloodPressure').value = '';
            document.getElementById('lastCheckup').value = '';
            document.getElementById('motherHealthIssues').value = '';
            updateMotherHistory();
          } else {
            showToast('рж╕ржВрж░ржХрзНрж╖ржгрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ');
          }
        };
        
        updateMotherHistory();
      }
      
      function renderChildHealth() {
        const content = document.getElementById('maternalContent');
        content.innerHTML = `
          <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #1976d2;">
            <h3 style="color: #0d47a1; margin: 0 0 10px 0;">ЁЯС╢ рж╢рж┐рж╢рзБрж░ ржпрждрзНржи</h3>
            <p style="margin: 0; color: #666; line-height: 1.6;">
              ржирж┐ржпрж╝ржорж┐ржд ржЯрж┐ржХрж╛ ржжрж┐ржиред ржкрзБрж╖рзНржЯрж┐ржХрж░ ржЦрж╛ржмрж╛рж░ ржжрж┐ржиред ржУржЬржи ржУ ржЙржЪрзНржЪрждрж╛ ржорж╛ржкрзБржиред
            </p>
          </div>
          
          <div class="form-group">
            <label class="form-label">рж╢рж┐рж╢рзБрж░ ржирж╛ржо</label>
            <input type="text" class="form-input" id="childName" placeholder="рж╢рж┐рж╢рзБрж░ ржирж╛ржо рж▓рж┐ржЦрзБржи">
          </div>
          
          <div class="form-group">
            <label class="form-label">ржЬржирзНржо рждрж╛рж░рж┐ржЦ</label>
            <input type="date" class="form-input" id="birthDate">
          </div>
          
          <div class="form-group">
            <label class="form-label">ржУржЬржи (ржХрзЗржЬрж┐)</label>
            <input type="number" class="form-input" id="childWeight" placeholder="ржмрж░рзНрждржорж╛ржи ржУржЬржи" step="0.1">
          </div>
          
          <div class="form-group">
            <label class="form-label">ржЙржЪрзНржЪрждрж╛ (рж╕рзЗржорж┐)</label>
            <input type="number" class="form-input" id="childHeight" placeholder="ржмрж░рзНрждржорж╛ржи ржЙржЪрзНржЪрждрж╛" step="0.1">
          </div>
          
          <div class="form-group">
            <label class="form-label">ржЦрж╛ржУржпрж╝рж╛ржирзЛрж░ ржзрж░ржи</label>
            <select class="form-select" id="feedingType">
              <option value="">ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>
              <option value="рж╢рзБржзрзБ ржмрзБржХрзЗрж░ ржжрзБржз">рж╢рзБржзрзБ ржмрзБржХрзЗрж░ ржжрзБржз</option>
              <option value="ржмрзБржХрзЗрж░ ржжрзБржз + ржлрж░рзНржорзБрж▓рж╛">ржмрзБржХрзЗрж░ ржжрзБржз + ржлрж░рзНржорзБрж▓рж╛</option>
              <option value="рж╢рзБржзрзБ ржлрж░рзНржорзБрж▓рж╛">рж╢рзБржзрзБ ржлрж░рзНржорзБрж▓рж╛</option>
              <option value="ржХржарж┐ржи ржЦрж╛ржмрж╛рж░ рж╢рзБрж░рзБ">ржХржарж┐ржи ржЦрж╛ржмрж╛рж░ рж╢рзБрж░рзБ</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label">рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕ржорж╕рзНржпрж╛ (ржпржжрж┐ ржерж╛ржХрзЗ)</label>
            <textarea class="form-textarea" id="childHealthIssues" placeholder="ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ ржмрж╛ ржЙржкрж╕рж░рзНржЧ ржерж╛ржХрж▓рзЗ рж▓рж┐ржЦрзБржи..."></textarea>
          </div>
          
          <button class="btn-submit" id="addChildBtn">рж╢рж┐рж╢рзБрж░ рждржерзНржп рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</button>
          
          <div style="margin-top: 30px;">
            <h3 style="color: #2e7d32; margin-bottom: 15px;">ржЯрж┐ржХрж╛рж░ рж╕ржоржпрж╝рж╕рзВржЪрзА</h3>
            <div class="vaccine-schedule" id="vaccineSchedule"></div>
          </div>
          
          <div style="margin-top: 30px;">
            <h3 style="color: #2e7d32; margin-bottom: 15px;">рж╢рж┐рж╢рзБрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп рж░рзЗржХрж░рзНржб</h3>
            <div id="childHistory"></div>
          </div>
        `;
        
        document.getElementById('addChildBtn').onclick = async () => {
          const name = document.getElementById('childName').value;
          const birthDate = document.getElementById('birthDate').value;
          const weight = document.getElementById('childWeight').value;
          const height = document.getElementById('childHeight').value;
          const feeding = document.getElementById('feedingType').value;
          
          if (!name || !birthDate) {
            showToast('ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ рж╢рж┐рж╢рзБрж░ ржирж╛ржо ржПржмржВ ржЬржирзНржо рждрж╛рж░рж┐ржЦ ржжрж┐ржи');
            return;
          }
          
          const btn = document.getElementById('addChildBtn');
          btn.disabled = true;
          btn.textContent = 'рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...';
          
          const result = await window.dataSdk.create({
            id: Date.now().toString(),
            type: 'child_health',
            date: new Date().toISOString(),
            child_name: name,
            birth_date: birthDate,
            weight: weight ? parseFloat(weight) : null,
            height: height ? parseFloat(height) : null,
            feeding_type: feeding,
            health_issues: document.getElementById('childHealthIssues').value,
            user_mode: currentUserMode
          });
          
          btn.disabled = false;
          btn.textContent = 'рж╢рж┐рж╢рзБрж░ рждржерзНржп рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи';
          
          if (result.isOk) {
            showToast('рж╢рж┐рж╢рзБрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп рждржерзНржп рж╕ржВрж░ржХрзНрж╖рж┐ржд рж╣ржпрж╝рзЗржЫрзЗ');
            // Clear form
            document.getElementById('childName').value = '';
            document.getElementById('birthDate').value = '';
            document.getElementById('childWeight').value = '';
            document.getElementById('childHeight').value = '';
            document.getElementById('feedingType').value = '';
            document.getElementById('childHealthIssues').value = '';
            updateVaccineSchedule(birthDate);
            updateChildHistory();
          } else {
            showToast('рж╕ржВрж░ржХрзНрж╖ржгрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ');
          }
        };
        
        updateVaccineSchedule();
        updateChildHistory();
      }
      
      function updateMotherHistory() {
        const historyDiv = document.getElementById('motherHistory');
        if (!historyDiv) return;
        
        const motherRecords = allData.filter(record => record.type === 'mother_health')
          .sort((a, b) => new Date(b.date) - new Date(a.date))
          .slice(0, 10);
        
        if (motherRecords.length === 0) {
          historyDiv.innerHTML = `
            <div class="empty-state">
              <div class="empty-icon">ЁЯСй</div>
              <p class="empty-text">ржПржЦржирзЛ ржХрзЛржирзЛ рж░рзЗржХрж░рзНржб ржирзЗржЗред ржкрзНрж░ржержо ржПржирзНржЯрзНрж░рж┐ ржХрж░рзБржи!</p>
            </div>
          `;
        } else {
          historyDiv.innerHTML = `
            <div class="history-list">
              ${motherRecords.map(record => {
                const date = new Date(record.date);
                const formattedDate = date.toLocaleDateString('bn-BD', {
                  year: 'numeric',
                  month: 'long',
                  day: 'numeric'
                });
                
                return `
                  <div class="history-item">
                    <div class="history-date">${formattedDate}</div>
                    <div class="history-mood">
                      ЁЯСй ${record.mother_name} - ${record.pregnancy_week} рж╕ржкрзНрждрж╛рж╣
                      ${record.weight ? `- ржУржЬржи: ${record.weight} ржХрзЗржЬрж┐` : ''}
                    </div>
                    ${record.blood_pressure ? `<div style="font-size: 14px; color: #666; margin-top: 5px;">рж░ржХрзНрждржЪрж╛ржк: ${record.blood_pressure}</div>` : ''}
                    ${record.health_issues ? `<div style="font-size: 14px; color: #666; margin-top: 5px; font-style: italic;">"${record.health_issues}"</div>` : ''}
                  </div>
                `;
              }).join('')}
            </div>
          `;
        }
      }
      
      function updateChildHistory() {
        const historyDiv = document.getElementById('childHistory');
        if (!historyDiv) return;
        
        const childRecords = allData.filter(record => record.type === 'child_health')
          .sort((a, b) => new Date(b.date) - new Date(a.date))
          .slice(0, 10);
        
        if (childRecords.length === 0) {
          historyDiv.innerHTML = `
            <div class="empty-state">
              <div class="empty-icon">ЁЯС╢</div>
              <p class="empty-text">ржПржЦржирзЛ ржХрзЛржирзЛ рж░рзЗржХрж░рзНржб ржирзЗржЗред ржкрзНрж░ржержо ржПржирзНржЯрзНрж░рж┐ ржХрж░рзБржи!</p>
            </div>
          `;
        } else {
          historyDiv.innerHTML = `
            <div class="history-list">
              ${childRecords.map(record => {
                const date = new Date(record.date);
                const formattedDate = date.toLocaleDateString('bn-BD', {
                  year: 'numeric',
                  month: 'long',
                  day: 'numeric'
                });
                
                const birthDate = new Date(record.birth_date);
                const ageMonths = Math.floor((date - birthDate) / (1000 * 60 * 60 * 24 * 30.44));
                
                return `
                  <div class="history-item">
                    <div class="history-date">${formattedDate}</div>
                    <div class="history-mood">
                      ЁЯС╢ ${record.child_name} - ${ageMonths} ржорж╛рж╕ ржмржпрж╝рж╕
                      ${record.weight ? `- ржУржЬржи: ${record.weight} ржХрзЗржЬрж┐` : ''}
                      ${record.height ? `- ржЙржЪрзНржЪрждрж╛: ${record.height} рж╕рзЗржорж┐` : ''}
                    </div>
                    ${record.feeding_type ? `<div style="font-size: 14px; color: #666; margin-top: 5px;">ржЦрж╛ржУржпрж╝рж╛ржирзЛ: ${record.feeding_type}</div>` : ''}
                    ${record.health_issues ? `<div style="font-size: 14px; color: #666; margin-top: 5px; font-style: italic;">"${record.health_issues}"</div>` : ''}
                  </div>
                `;
              }).join('')}
            </div>
          `;
        }
      }
      
      function updateVaccineSchedule(birthDate) {
        const scheduleDiv = document.getElementById('vaccineSchedule');
        if (!scheduleDiv) return;
        
        if (!birthDate) {
          scheduleDiv.innerHTML = `
            <div class="empty-state">
              <div class="empty-icon">ЁЯТЙ</div>
              <p class="empty-text">рж╢рж┐рж╢рзБрж░ ржЬржирзНржо рждрж╛рж░рж┐ржЦ ржжрж┐рж▓рзЗ ржЯрж┐ржХрж╛рж░ рж╕ржоржпрж╝рж╕рзВржЪрзА ржжрзЗржЦрж╛ржмрзЗ</p>
            </div>
          `;
          return;
        }
        
        const birth = new Date(birthDate);
        const today = new Date();
        
        scheduleDiv.innerHTML = vaccineSchedule.map(vaccine => {
          const vaccineDate = new Date(birth);
          vaccineDate.setMonth(vaccineDate.getMonth() + vaccine.ageMonths);
          
          const isPast = vaccineDate < today;
          const status = isPast ? 'pending' : 'pending';
          const statusText = isPast ? 'ржмрж╛ржХрж┐ ржЖржЫрзЗ' : 'ржЖрж╕ржЫрзЗ';
          
          return `
            <div class="vaccine-item">
              <div class="vaccine-info">
                <h4 class="vaccine-name">${vaccine.name}</h4>
                <p class="vaccine-date">${vaccine.description} - ${vaccineDate.toLocaleDateString('bn-BD')}</p>
              </div>
              <span class="vaccine-status ${status}">${statusText}</span>
            </div>
          `;
        }).join('');
      }
    }

    function renderSymptomGuide(container) {
      container.innerHTML = `
        <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #1976d2;">
          <h3 style="color: #0d47a1; margin: 0 0 10px 0;">тЪая╕П ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг</h3>
          <p style="margin: 0; color: #666; line-height: 1.6;">
            ржПржЗ рждржерзНржп рж╢рзБржзрзБржорж╛рждрзНрж░ рж╕ржЪрзЗрждржирждрж╛рж░ ржЬржирзНржпред рж░рзЛржЧ ржирж┐рж░рзНржгржпрж╝ ржиржпрж╝ред 
            ржпрзЗржХрзЛржирзЛ ржЧрзБрж░рзБрждрж░ рж▓ржХрзНрж╖ржгрзЗ ржЕржмрж╢рзНржпржЗ ржбрж╛ржХрзНрждрж╛рж░ ржжрзЗржЦрж╛ржиред
          </p>
        </div>
        
        <div style="background: #f5f5f5; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
          <h3 style="color: #2e7d32; margin: 0 0 15px 0;">ЁЯй║ ржЖржкржирж╛рж░ рж▓ржХрзНрж╖ржг ржмрж░рзНржгржирж╛ ржХрж░рзБржи</h3>
          <div class="form-group">
            <label class="form-label">ржЖржкржирж╛рж░ рж╕ржорж╕рзНржпрж╛ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рж▓рж┐ржЦрзБржи</label>
            <textarea class="form-textarea" id="symptomInput" placeholder="ржпрзЗржоржи: ржЬрзНржмрж░, ржорж╛ржерж╛ржмрзНржпржерж╛, ржкрзЗржЯ ржмрзНржпржерж╛, ржХрж╛рж╢рж┐, рж╢рзНржмрж╛рж╕ржХрж╖рзНржЯ ржЗрждрзНржпрж╛ржжрж┐..." style="min-height: 100px;"></textarea>
          </div>
          <button class="btn-submit" id="analyzeSymptomBtn">рж▓ржХрзНрж╖ржг ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржи</button>
          
          <div id="symptomAdvice" style="margin-top: 20px; display: none;">
            <!-- Advice will appear here -->
          </div>
        </div>
        
        <h3 style="color: #2e7d32; margin: 20px 0 15px 0;">ЁЯЪи ржЬрж░рзБрж░рж┐ рж▓ржХрзНрж╖ржгрж╕ржорзВрж╣</h3>
        ${symptoms.map(symptom => `
          <div class="symptom-card">
            <h3 class="symptom-title">${symptom.title}</h3>
            <p class="symptom-desc">${symptom.description}</p>
            <p class="symptom-action">${symptom.action}</p>
          </div>
        `).join('')}
      `;
      
      document.getElementById('analyzeSymptomBtn').onclick = () => {
        const symptomText = document.getElementById('symptomInput').value.trim();
        if (!symptomText) {
          showToast('ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЖржкржирж╛рж░ рж▓ржХрзНрж╖ржг рж▓рж┐ржЦрзБржи');
          return;
        }
        
        const advice = analyzeSymptoms(symptomText);
        displaySymptomAdvice(advice);
      };
    }

    function renderHealthEvents(container) {
      container.innerHTML = `
        <div class="filter-group">
          <select class="form-select" id="eventDivisionFilter">
            <option value="">рж╕ржм ржмрж┐ржнрж╛ржЧ</option>
            ${divisions.map(d => `<option value="${d}">${d}</option>`).join('')}
          </select>
          <select class="form-select" id="eventZillaFilter">
            <option value="">рж╕ржм ржЬрзЗрж▓рж╛</option>
          </select>
        </div>
        
        <div id="eventsList"></div>
      `;
      
      const divisionFilter = document.getElementById('eventDivisionFilter');
      const zillaFilter = document.getElementById('eventZillaFilter');
      
      divisionFilter.onchange = () => {
        const division = divisionFilter.value;
        zillaFilter.innerHTML = '<option value="">рж╕ржм ржЬрзЗрж▓рж╛</option>';
        
        if (division && zillasByDivision[division]) {
          zillasByDivision[division].forEach(z => {
            zillaFilter.innerHTML += `<option value="${z}">${z}</option>`;
          });
        }
        updateEventsList();
      };
      
      zillaFilter.onchange = updateEventsList;
      
      function updateEventsList() {
        const division = divisionFilter.value;
        const zilla = zillaFilter.value;
        
        let filtered = healthEvents;
        if (division) filtered = filtered.filter(e => e.division === division);
        if (zilla) filtered = filtered.filter(e => e.zilla === zilla);
        
        const eventsList = document.getElementById('eventsList');
        if (filtered.length === 0) {
          eventsList.innerHTML = `
            <div class="empty-state">
              <div class="empty-icon">ЁЯУЕ</div>
              <p class="empty-text">ржПржЗ ржПрж▓рж╛ржХрж╛ржпрж╝ ржХрзЛржирзЛ ржХрж░рзНржорж╕рзВржЪрзА ржирзЗржЗ</p>
            </div>
          `;
        } else {
          eventsList.innerHTML = filtered.map(event => `
            <div class="event-card">
              <h3 class="event-title">${event.title}</h3>
              <p class="event-info"><strong>ЁЯУЕ рждрж╛рж░рж┐ржЦ:</strong> ${event.date}</p>
              <p class="event-info"><strong>ЁЯХР рж╕ржоржпрж╝:</strong> ${event.time}</p>
              <p class="event-info"><strong>ЁЯУН рж╕рзНржерж╛ржи:</strong> ${event.location}</p>
              <p class="event-info"><strong>ЁЯПв ржЖржпрж╝рзЛржЬржХ:</strong> ${event.organizer}</p>
              <p class="event-info"><strong>ЁЯй║ рж╕рзЗржмрж╛:</strong> ${event.services}</p>
              <div class="event-actions">
                <button class="btn btn-primary btn-small" onclick="rsvpEvent('${event.id}')">ржЕржВрж╢ ржирзЗржм</button>
              </div>
            </div>
          `).join('');
        }
      }
      
      updateEventsList();
    }

    async function rsvpEvent(eventId) {
      const result = await window.dataSdk.create({
        id: Date.now().toString(),
        type: 'event_rsvp',
        date: new Date().toISOString(),
        event_id: eventId,
        user_mode: currentUserMode
      });
      
      if (result.isOk) {
        showToast('ржЖржкржирж╛рж░ ржЕржВрж╢ржЧрзНрж░рж╣ржг ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ');
      } else {
        showToast('рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи');
      }
    }

    function renderHealthWorkers(container) {
      container.innerHTML = `
        <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #43a047;">
          <h3 style="color: #2e7d32; margin: 0 0 15px 0;">ЁЯФН рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА ржЦрзБржБржЬрзБржи</h3>
          <div class="form-group">
            <label class="form-label">ржирж╛ржо ржмрж╛ ржПрж▓рж╛ржХрж╛ рж▓рж┐ржЦрзБржи</label>
            <input type="text" class="form-input" id="areaSearchInput" placeholder="ржпрзЗржоржи: рж░рж╣рж┐ржорж╛ ржЦрж╛рждрзБржи, ржХрж▓рж╛ржкрж╛ржбрж╝рж╛, ржзрж╛ржорж░рж╛ржЗ...">
          </div>
          <div class="form-group">
            <label class="form-label">ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржжржХрзНрж╖рждрж╛ рж▓рж┐ржЦрзБржи</label>
            <input type="text" class="form-input" id="skillSearchInput" placeholder="ржпрзЗржоржи: ржорж╛ ржУ рж╢рж┐рж╢рзБ рж╕рзНржмрж╛рж╕рзНржерзНржп, ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп, ржкрзНрж░рж╛ржержорж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛...">
          </div>
          <button class="btn-submit" id="searchWorkersBtn">ржЦрзБржБржЬрзБржи</button>
        </div>
        
        <div class="filter-group">
          <select class="form-select" id="workerDivisionFilter">
            <option value="">рж╕ржм ржмрж┐ржнрж╛ржЧ</option>
            ${divisions.map(d => `<option value="${d}">${d}</option>`).join('')}
          </select>
          <select class="form-select" id="workerZillaFilter">
            <option value="">рж╕ржм ржЬрзЗрж▓рж╛</option>
          </select>
        </div>
        
        <div id="workersList"></div>
      `;
      
      const areaSearchInput = document.getElementById('areaSearchInput');
      const skillSearchInput = document.getElementById('skillSearchInput');
      const searchWorkersBtn = document.getElementById('searchWorkersBtn');
      const divisionFilter = document.getElementById('workerDivisionFilter');
      const zillaFilter = document.getElementById('workerZillaFilter');
      
      // Search functionality
      searchWorkersBtn.onclick = () => {
        const areaText = areaSearchInput.value.trim().toLowerCase();
        const skillText = skillSearchInput.value.trim().toLowerCase();
        
        if (!areaText && !skillText) {
          showToast('ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржирж╛ржо/ржПрж▓рж╛ржХрж╛ ржмрж╛ ржжржХрзНрж╖рждрж╛ рж▓рж┐ржЦрзБржи');
          return;
        }
        
        searchWorkers(areaText, skillText);
      };
      
      // Enter key support for search inputs
      areaSearchInput.onkeypress = (e) => {
        if (e.key === 'Enter') {
          searchWorkersBtn.click();
        }
      };
      
      skillSearchInput.onkeypress = (e) => {
        if (e.key === 'Enter') {
          searchWorkersBtn.click();
        }
      };
      
      divisionFilter.onchange = () => {
        const division = divisionFilter.value;
        zillaFilter.innerHTML = '<option value="">рж╕ржм ржЬрзЗрж▓рж╛</option>';
        
        if (division && zillasByDivision[division]) {
          zillasByDivision[division].forEach(z => {
            zillaFilter.innerHTML += `<option value="${z}">${z}</option>`;
          });
        }
        updateWorkersList();
      };
      
      zillaFilter.onchange = updateWorkersList;
      
      function updateWorkersList() {
        const division = divisionFilter.value;
        const zilla = zillaFilter.value;
        
        let filtered = healthWorkers;
        if (division) filtered = filtered.filter(w => w.division === division);
        if (zilla) filtered = filtered.filter(w => w.zilla === zilla);
        
        let title = 'рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзАржжрзЗрж░ рждрж╛рж▓рж┐ржХрж╛';
        if (division || zilla) {
          const filters = [];
          if (division) filters.push(division);
          if (zilla) filters.push(zilla);
          title = `ржлрж┐рж▓рзНржЯрж╛рж░: ${filters.join(', ')}`;
        }
        
        displayWorkers(filtered, title);
      }
      
      // Search function
      function searchWorkers(areaText, skillText) {
        let filtered = healthWorkers;
        
        // Filter by area (search in division, zilla, upazila, union) and name
        if (areaText) {
          filtered = filtered.filter(worker => {
            const searchableText = `${worker.name} ${worker.division} ${worker.zilla} ${worker.upazila} ${worker.union}`.toLowerCase();
            return searchableText.includes(areaText);
          });
        }
        
        // Filter by skills
        if (skillText) {
          filtered = filtered.filter(worker => {
            const skillsText = worker.skills.join(' ').toLowerCase();
            return skillsText.includes(skillText);
          });
        }
        
        const searchTerms = [areaText, skillText].filter(term => term).join(', ');
        displayWorkers(filtered, `ржЦрзЛржБржЬрж╛рж░ ржлрж▓рж╛ржлрж▓: "${searchTerms}"`);
      }
      
      updateWorkersList();
    }
    
    // Helper function to display workers
    function displayWorkers(workers, title = 'рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзАржжрзЗрж░ рждрж╛рж▓рж┐ржХрж╛') {
      const workersList = document.getElementById('workersList');
      if (!workersList) return;
      
      if (workers.length === 0) {
        workersList.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">ЁЯСитАНтЪХя╕П</div>
            <p class="empty-text">ржХрзЛржирзЛ рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐</p>
            <p style="font-size: 14px; color: #999; margin-top: 10px;">
              ржЕржирзНржп ржПрж▓рж╛ржХрж╛ ржмрж╛ ржжржХрзНрж╖рждрж╛ ржжрж┐ржпрж╝рзЗ ржЦрзЛржБржЬ ржХрж░рзБржи
            </p>
          </div>
        `;
      } else {
        workersList.innerHTML = `
          <div style="margin-bottom: 15px;">
            <h4 style="color: #2e7d32; margin: 0;">${title} (${workers.length}ржЬржи рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА)</h4>
          </div>
          ${workers.map(worker => `
            <div class="worker-card">
              <h3 class="worker-name">${worker.name}</h3>
              <p class="worker-info"><strong>ЁЯУН ржПрж▓рж╛ржХрж╛:</strong> ${worker.union}, ${worker.upazila}, ${worker.zilla}</p>
              <p class="worker-info"><strong>ЁЯПв ржкрзНрж░рж╢рж┐ржХрзНрж╖ржг:</strong> ${worker.training}</p>
              <p class="worker-info"><strong>ЁЯУЮ ржлрзЛржи:</strong> <a href="tel:${worker.phone}" class="phone-number">${worker.phone}</a></p>
              <p class="worker-info"><strong>ЁЯПа ржарж┐ржХрж╛ржирж╛:</strong> ${worker.contact}</p>
              <div class="worker-skills">
                ${worker.skills.map(skill => `<span class="skill-badge">${skill}</span>`).join('')}
              </div>
            </div>
          `).join('')}
        `;
      }
    }

    function renderAdminStats(container) {
      if (!isAdmin) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">ЁЯФТ</div>
            <p class="empty-text">ржПржЗ ржкрзЗржЬ рж╢рзБржзрзБржорж╛рждрзНрж░ ржЕрзНржпрж╛ржбржорж┐ржиржжрзЗрж░ ржЬржирзНржп</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = `
        <div class="stats-grid">
          <div class="stat-card">
            <h3 class="stat-value" id="totalCheckins">рзж</h3>
            <p class="stat-label">ржорзЛржЯ ржЪрзЗржХ-ржЗржи</p>
          </div>
          <div class="stat-card">
            <h3 class="stat-value" id="totalHelp">рзж</h3>
            <p class="stat-label">рж╕рж╛рж╣рж╛ржпрзНржпрзЗрж░ ржЕржирзБрж░рзЛржз</p>
          </div>
          <div class="stat-card">
            <h3 class="stat-value" id="totalMothers">рзж</h3>
            <p class="stat-label">ржорж╛ржпрж╝рзЗрж░ рж░рзЗржХрж░рзНржб</p>
          </div>
          <div class="stat-card">
            <h3 class="stat-value" id="totalChildren">рзж</h3>
            <p class="stat-label">рж╢рж┐рж╢рзБрж░ рж░рзЗржХрж░рзНржб</p>
          </div>
          <div class="stat-card">
            <h3 class="stat-value" id="totalEvents">рзж</h3>
            <p class="stat-label">ржЗржнрзЗржирзНржЯ RSVP</p>
          </div>
        </div>
        
        <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #43a047;">
          <h3 style="color: #2e7d32; margin: 0 0 15px 0;">ЁЯУК ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи</h3>
          <div id="detailedStats"></div>
        </div>
        
        <div style="background: #fff3e0; padding: 20px; border-radius: 10px; margin-top: 20px; border-left: 4px solid #f57c00;">
          <h3 style="color: #e65100; margin: 0 0 10px 0;">ЁЯФТ ржЧрзЛржкржирзАржпрж╝рждрж╛ ржирзЛржЯ</h3>
          <p style="margin: 0; color: #666; line-height: 1.6;">
            ржПржЗ ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи рж╕ржорзНржкрзВрж░рзНржг ржмрзЗржирж╛ржорзАред ржХрзЛржирзЛ ржмрзНржпржХрзНрждрж┐ржЧржд рждржерзНржп ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣ржпрж╝ ржирж╛ред
            рж╢рзБржзрзБржорж╛рждрзНрж░ рж╕ржВржЦрзНржпрж╛ ржПржмржВ ржЯрзНрж░рзЗржирзНржб ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝ред
          </p>
        </div>
      `;
      
      // Load initial stats
      updateAdminStats();
    }
    
    function updateAdminStats() {
      if (!isAdmin) return;
      
      const totalCheckins = allData.filter(record => record.type === 'mood').length;
      const totalHelp = allData.filter(record => record.type === 'help_request').length;
      const totalMothers = allData.filter(record => record.type === 'mother_health').length;
      const totalChildren = allData.filter(record => record.type === 'child_health').length;
      const totalEvents = allData.filter(record => record.type === 'event_rsvp').length;
      
      const totalCheckinsEl = document.getElementById('totalCheckins');
      const totalHelpEl = document.getElementById('totalHelp');
      const totalMothersEl = document.getElementById('totalMothers');
      const totalChildrenEl = document.getElementById('totalChildren');
      const totalEventsEl = document.getElementById('totalEvents');
      
      if (totalCheckinsEl) totalCheckinsEl.textContent = totalCheckins;
      if (totalHelpEl) totalHelpEl.textContent = totalHelp;
      if (totalMothersEl) totalMothersEl.textContent = totalMothers;
      if (totalChildrenEl) totalChildrenEl.textContent = totalChildren;
      if (totalEventsEl) totalEventsEl.textContent = totalEvents;
      
      // Update detailed stats
      const detailedStatsEl = document.getElementById('detailedStats');
      if (detailedStatsEl) {
        const moodStats = getMoodStatistics();
        const helpStats = getHelpStatistics();
        
        detailedStatsEl.innerHTML = `
          <div style="display: grid; gap: 15px;">
            <div style="background: white; padding: 15px; border-radius: 8px;">
              <h4 style="color: #2e7d32; margin: 0 0 10px 0;">ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп ржЯрзНрж░рзЗржирзНржб</h4>
              <div style="font-size: 14px; color: #666;">
                ${moodStats.map(stat => `<div style="margin: 5px 0;">${stat.mood}: ${stat.count}ржЯрж┐ (${stat.percentage}%)</div>`).join('')}
              </div>
            </div>
            
            <div style="background: white; padding: 15px; border-radius: 8px;">
              <h4 style="color: #2e7d32; margin: 0 0 10px 0;">рж╕рж╛рж╣рж╛ржпрзНржпрзЗрж░ ржзрж░ржи</h4>
              <div style="font-size: 14px; color: #666;">
                ${helpStats.categoryStats.map(stat => `<div style="margin: 5px 0;">${stat.category}: ${stat.count}ржЯрж┐</div>`).join('')}
              </div>
            </div>
            
            <div style="background: white; padding: 15px; border-radius: 8px;">
              <h4 style="color: #2e7d32; margin: 0 0 10px 0;">рж╕рж╛рж╣рж╛ржпрзНржпрзЗрж░ ржЬрж░рзБрж░рж┐рждрж╛</h4>
              <div style="font-size: 14px; color: #666;">
                ${helpStats.urgencyStats.map(stat => {
                  let emoji = 'тЪк';
                  if (stat.urgency === 'рж╕рж╛ржзрж╛рж░ржг') emoji = 'ЁЯЯв';
                  else if (stat.urgency === 'ржорж╛ржЭрж╛рж░рж┐') emoji = 'ЁЯЯб';
                  else if (stat.urgency === 'ржЕрждрж┐ ржЬрж░рзБрж░рж┐') emoji = 'ЁЯФ┤';
                  return `<div style="margin: 5px 0;">${emoji} ${stat.urgency}: ${stat.count}ржЯрж┐</div>`;
                }).join('')}
              </div>
            </div>
            
            <div style="background: white; padding: 15px; border-radius: 8px;">
              <h4 style="color: #2e7d32; margin: 0 0 10px 0;">ржЧрзЛржкржирзАржпрж╝рждрж╛ ржорзЛржб</h4>
              <div style="font-size: 14px; color: #666;">
                <div style="margin: 5px 0;">ржЧрзЛржкржи: ${allData.filter(r => r.user_mode === 'anonymous').length}ржЯрж┐</div>
                <div style="margin: 5px 0;">рж╕рж╛ржзрж╛рж░ржг: ${allData.filter(r => r.user_mode !== 'anonymous').length}ржЯрж┐</div>
              </div>
            </div>
          </div>
        `;
      }
    }
    
    function getMoodStatistics() {
      const moodRecords = allData.filter(record => record.type === 'mood');
      const moodCounts = {};
      
      moodRecords.forEach(record => {
        const mood = record.mood || 'ржЕржЬрж╛ржирж╛';
        moodCounts[mood] = (moodCounts[mood] || 0) + 1;
      });
      
      const total = moodRecords.length;
      return Object.entries(moodCounts).map(([mood, count]) => ({
        mood,
        count,
        percentage: total > 0 ? Math.round((count / total) * 100) : 0
      })).sort((a, b) => b.count - a.count);
    }
    
    function getHelpStatistics() {
      const helpRecords = allData.filter(record => record.type === 'help_request');
      const categoryCounts = {};
      const urgencyCounts = {};
      
      helpRecords.forEach(record => {
        const category = record.help_category || 'ржЕржирзНржпрж╛ржирзНржп';
        categoryCounts[category] = (categoryCounts[category] || 0) + 1;
        
        const urgency = record.help_urgency || 'ржЕржирж┐рж░рзНржжрж┐рж╖рзНржЯ';
        urgencyCounts[urgency] = (urgencyCounts[urgency] || 0) + 1;
      });
      
      const categoryStats = Object.entries(categoryCounts).map(([category, count]) => ({
        category,
        count
      })).sort((a, b) => b.count - a.count);
      
      const urgencyStats = Object.entries(urgencyCounts).map(([urgency, count]) => ({
        urgency,
        count
      })).sort((a, b) => b.count - a.count);
      
      return { categoryStats, urgencyStats };
    }

    // Voice Assistant
    let recognition;
    let isListening = false;

    function initVoiceAssistant() {
      if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
        console.log('Speech recognition not supported');
        document.getElementById('voiceBtn').style.display = 'none';
        return;
      }
      
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition = new SpeechRecognition();
      
      // Enhanced settings for better Bengali recognition
      recognition.lang = 'bn-BD';
      recognition.continuous = false;
      recognition.interimResults = false;
      recognition.maxAlternatives = 3;
      
      recognition.onstart = () => {
        console.log('Voice recognition started');
        isListening = true;
        document.getElementById('voiceBtn').classList.add('listening');
      };
      
      recognition.onresult = (event) => {
        console.log('Voice recognition result received');
        let transcript = '';
        
        // Try to get the best result from alternatives
        for (let i = 0; i < event.results.length; i++) {
          if (event.results[i].isFinal) {
            transcript = event.results[i][0].transcript.toLowerCase().trim();
            break;
          }
        }
        
        if (transcript) {
          console.log('Transcript:', transcript);
          handleVoiceCommand(transcript);
        }
      };
      
      recognition.onerror = (event) => {
        console.error('Speech recognition error:', event.error);
        isListening = false;
        document.getElementById('voiceBtn').classList.remove('listening');
        
        let errorMessage = 'ржнржпрж╝рзЗрж╕ рж╕рж╣рж╛ржпрж╝ржХрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ';
        switch(event.error) {
          case 'no-speech':
            errorMessage = 'ржХрзЛржирзЛ ржХржерж╛ рж╢рзЛржирж╛ ржпрж╛ржпрж╝ржирж┐ред ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред';
            break;
          case 'audio-capture':
            errorMessage = 'ржорж╛ржЗржХрзНрж░рзЛржлрзЛржи ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рж╛ ржпрж╛ржпрж╝ржирж┐ред';
            break;
          case 'not-allowed':
            errorMessage = 'ржорж╛ржЗржХрзНрж░рзЛржлрзЛржи ржЕржирзБржорждрж┐ ржжрж┐ржиред';
            break;
          case 'network':
            errorMessage = 'ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕ржВржпрзЛржЧ ржЪрзЗржХ ржХрж░рзБржиред';
            break;
        }
        
        showToast(errorMessage);
        speak(errorMessage);
      };
      
      recognition.onend = () => {
        console.log('Voice recognition ended');
        isListening = false;
        document.getElementById('voiceBtn').classList.remove('listening');
      };
      
      // Show voice button with enhanced styling
      const voiceBtn = document.getElementById('voiceBtn');
      voiceBtn.style.display = 'flex';
      voiceBtn.title = 'ржнржпрж╝рзЗрж╕ рж╕рж╣рж╛ржпрж╝ржХ - ржХрзНрж▓рж┐ржХ ржХрж░рзЗ ржХржерж╛ ржмрж▓рзБржи';
    }

    function handleVoiceCommand(command) {
      console.log('Voice command received:', command);
      
      // Close any open modal first
      document.getElementById('modal').classList.remove('active');
      
      // Health Map commands
      if (command.includes('рж╣рж╛рж╕ржкрж╛рждрж╛рж▓') || command.includes('ржХрзНрж▓рж┐ржирж┐ржХ') || command.includes('ржбрж╛ржХрзНрждрж╛рж░') || 
          command.includes('ржЪрж┐ржХрж┐рзОрж╕рж╛') || command.includes('рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рзЗржмрж╛') || command.includes('ржорзНржпрж╛ржк')) {
        openFeature('health-map');
        speak('рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рзЗржмрж╛ ржорзНржпрж╛ржк ржЦрзЛрж▓рж╛ рж╣ржЪрзНржЫрзЗред ржПржЦрж╛ржирзЗ ржЖржкржирж┐ ржХрж╛ржЫрзЗрж░ рж╣рж╛рж╕ржкрж╛рждрж╛рж▓ ржУ ржХрзНрж▓рж┐ржирж┐ржХ ржЦрзБржБржЬрзЗ ржкрж╛ржмрзЗржиред');
      } 
      // Mental Health commands
      else if (command.includes('ржоржи') || command.includes('ржорзЗржЬрж╛ржЬ') || command.includes('ржЪрзЗржХ') || 
               command.includes('ржорж╛ржирж╕рж┐ржХ') || command.includes('рж╕рзНржЯрзНрж░рзЗрж╕') || command.includes('ржЪрж╛ржк')) {
        openFeature('mental-health');
        speak('ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп ржЪрзЗржХ-ржЗржи ржЦрзЛрж▓рж╛ рж╣ржЪрзНржЫрзЗред ржЖржкржирж╛рж░ ржЖржЬржХрзЗрж░ ржорзЗржЬрж╛ржЬ рж░рзЗржХрж░рзНржб ржХрж░рзБржиред');
      } 
      // Anonymous Help commands
      else if (command.includes('рж╕рж╛рж╣рж╛ржпрзНржп') || command.includes('рж╣рзЗрж▓рзНржк') || command.includes('ржЧрзЛржкржи') || 
               command.includes('рж╕ржорж╕рзНржпрж╛') || command.includes('ржкрж░рж╛ржорж░рзНрж╢')) {
        openFeature('anonymous-help');
        speak('ржЧрзЛржкржи рж╕рж╛рж╣рж╛ржпрзНржп ржкрзЗржЬ ржЦрзЛрж▓рж╛ рж╣ржЪрзНржЫрзЗред ржПржЦрж╛ржирзЗ ржЖржкржирж┐ рж╕ржорзНржкрзВрж░рзНржг ржЧрзЛржкржирзАржпрж╝рждрж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржЪрж╛ржЗрждрзЗ ржкрж╛рж░рзЗржиред');
      } 
      // Maternal & Child Health commands
      else if (command.includes('ржЯрж┐ржХрж╛') || command.includes('рж╢рж┐рж╢рзБ') || command.includes('ржорж╛') || 
               command.includes('ржЧрж░рзНржнржмрждрзА') || command.includes('ржмрж╛ржЪрзНржЪрж╛') || command.includes('ржкрзНрж░рж╕ржм')) {
        openFeature('maternal-child');
        speak('ржорж╛ ржУ рж╢рж┐рж╢рзБ рж╕рзНржмрж╛рж╕рзНржерзНржп ржЦрзЛрж▓рж╛ рж╣ржЪрзНржЫрзЗред ржПржЦрж╛ржирзЗ ржЯрж┐ржХрж╛рж░ рж╕ржоржпрж╝рж╕рзВржЪрзА ржУ ржЧрж░рзНржнржХрж╛рж▓рзАржи ржпрждрзНржирзЗрж░ рждржерзНржп ржкрж╛ржмрзЗржиред');
      } 
      // Seasonal Tips commands
      else if (command.includes('ржкрж░рж╛ржорж░рзНрж╢') || command.includes('ржЯрж┐ржкрж╕') || command.includes('ржмрж░рзНрж╖рж╛') || 
               command.includes('рж╢рзАржд') || command.includes('ржЧрзНрж░рзАрж╖рзНржо') || command.includes('ржЛрждрзБ')) {
        openFeature('seasonal-tips');
        speak('ржЛрждрзБ ржЕржирзБржпрж╛ржпрж╝рзА рж╕рзНржмрж╛рж╕рзНржерзНржп ржкрж░рж╛ржорж░рзНрж╢ ржЦрзЛрж▓рж╛ рж╣ржЪрзНржЫрзЗред ржПржЦрж╛ржирзЗ ржмрж┐ржнрж┐ржирзНржи ржЛрждрзБрж░ ржЬржирзНржп рж╕рзНржмрж╛рж╕рзНржерзНржп ржЯрж┐ржкрж╕ ржкрж╛ржмрзЗржиред');
      } 
      // Symptom Guide commands
      else if (command.includes('рж▓ржХрзНрж╖ржг') || command.includes('ржЙржкрж╕рж░рзНржЧ') || command.includes('ржЕрж╕рзБрж╕рзНрже') || 
               command.includes('ржмрзНржпржерж╛') || command.includes('ржЬрзНржмрж░') || command.includes('ржХрж╛рж╢рж┐')) {
        openFeature('symptom-guide');
        speak('рж▓ржХрзНрж╖ржг рж╕ржЪрзЗрждржирждрж╛ ржЧрж╛ржЗржб ржЦрзЛрж▓рж╛ рж╣ржЪрзНржЫрзЗред ржПржЦрж╛ржирзЗ ржмрж┐ржнрж┐ржирзНржи рж▓ржХрзНрж╖ржгрзЗрж░ ржЬржирзНржп ржкрж░рж╛ржорж░рзНрж╢ ржкрж╛ржмрзЗржиред');
      } 
      // Health Events commands
      else if (command.includes('ржХрзНржпрж╛ржорзНржк') || command.includes('ржХрж░рзНржорж╕рзВржЪрзА') || command.includes('ржЗржнрзЗржирзНржЯ') || 
               command.includes('рж╢рж┐ржмрж┐рж░') || command.includes('ржЕржирзБрж╖рзНржарж╛ржи')) {
        openFeature('health-events');
        speak('рж╕рзНржмрж╛рж╕рзНржерзНржп ржХрзНржпрж╛ржорзНржк ржУ ржХрж░рзНржорж╕рзВржЪрзАрж░ рждрж╛рж▓рж┐ржХрж╛ ржЦрзЛрж▓рж╛ рж╣ржЪрзНржЫрзЗред ржПржЦрж╛ржирзЗ ржЖрж╕ржирзНржи рж╕рзНржмрж╛рж╕рзНржерзНржп рж╢рж┐ржмрж┐рж░рзЗрж░ рждржерзНржп ржкрж╛ржмрзЗржиред');
      } 
      // Health Workers commands
      else if (command.includes('рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА') || command.includes('ржХрж░рзНржорзА') || command.includes('ржирж╛рж░рзНрж╕') || 
               command.includes('рж╕рзЗржмрж┐ржХрж╛') || command.includes('ржжрж╛ржЗ')) {
        openFeature('health-workers');
        speak('рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА ржЦрзЛржБржЬрж╛рж░ ржкрзЗржЬ ржЦрзЛрж▓рж╛ рж╣ржЪрзНржЫрзЗред ржПржЦрж╛ржирзЗ ржЖржкржирж╛рж░ ржПрж▓рж╛ржХрж╛рж░ ржкрзНрж░рж╢рж┐ржХрзНрж╖рж┐ржд рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзАржжрзЗрж░ рждржерзНржп ржкрж╛ржмрзЗржиред');
      } 
      // Admin commands
      else if (command.includes('ржЕрзНржпрж╛ржбржорж┐ржи') || command.includes('рж░рж┐ржкрзЛрж░рзНржЯ') || command.includes('ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи') || 
               command.includes('ржбрзЗржЯрж╛') || command.includes('рж▓ржЧржЗржи')) {
        if (isAdmin) {
          openFeature('admin-stats');
          speak('ржбрзЗржЯрж╛ рж░рж┐ржкрзЛрж░рзНржЯ ржЦрзЛрж▓рж╛ рж╣ржЪрзНржЫрзЗред ржПржЦрж╛ржирзЗ рж╕ржм ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржиред');
        } else {
          document.getElementById('loginBtn').click();
          speak('ржЕрзНржпрж╛ржбржорж┐ржи рж▓ржЧржЗржи ржкрзЗржЬ ржЦрзЛрж▓рж╛ рж╣ржЪрзНржЫрзЗред');
        }
      } 
      // Navigation commands
      else if (command.includes('ржмржирзНржз') || command.includes('ржХрзНрж▓рзЛржЬ') || command.includes('ржмрж╛рждрж┐рж▓')) {
        document.getElementById('modal').classList.remove('active');
        speak('ржкрзЗржЬ ржмржирзНржз ржХрж░рж╛ рж╣рж▓рзЛред');
      } 
      else if (command.includes('рж╣рзЛржо') || command.includes('ржорзВрж▓') || command.includes('рж╢рзБрж░рзБ')) {
        document.getElementById('modal').classList.remove('active');
        speak('ржорзВрж▓ ржкрзЗржЬрзЗ ржлрж┐рж░рзЗ ржПрж╕рзЗржЫрзЗржиред');
      } 
      // Help commands
      else if (command.includes('ржХржорж╛ржирзНржб') || command.includes('ржирж┐рж░рзНржжрзЗрж╢') || command.includes('ржХрзА ржмрж▓ржм')) {
        showVoiceHelp();
      } 
      // Default response
      else {
        speak('ржжрзБржГржЦрж┐ржд, ржЖржорж┐ ржмрзБржЭрждрзЗ ржкрж╛рж░рж┐ржирж┐ред "ржХржорж╛ржирзНржб" ржмрж▓рзБржи рж╕ржм ржирж┐рж░рзНржжрзЗрж╢ржирж╛ ржЬрж╛ржирждрзЗред');
        setTimeout(() => {
          showVoiceHelp();
        }, 2000);
      }
    }

    function speak(text) {
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'bn-BD';
        window.speechSynthesis.speak(utterance);
      }
    }

    function showVoiceHelp() {
      const modal = document.getElementById('modal');
      const modalTitle = document.getElementById('modalTitle');
      const modalBody = document.getElementById('modalBody');
      
      modalTitle.textContent = 'ЁЯОд ржнржпрж╝рзЗрж╕ ржХржорж╛ржирзНржб ржЧрж╛ржЗржб';
      modalBody.innerHTML = `
        <div class="voice-modal">
          <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #43a047;">
            <h3 style="color: #2e7d32; margin: 0 0 15px 0;">ЁЯЧгя╕П ржХрзАржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи</h3>
            <p style="margin: 0; color: #666; line-height: 1.6;">
              ржирж┐ржЪрзЗрж░ ржпрзЗржХрзЛржирзЛ рж╢ржмрзНржж ржмрж╛ ржмрж╛ржХрзНржп ржмрж▓рзБржиред ржнржпрж╝рзЗрж╕ рж╕рж╣рж╛ржпрж╝ржХ ржЖржкржирж╛рж░ ржХржерж╛ ржмрзБржЭрзЗ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ ржкрзЗржЬ ржЦрзБрж▓рзЗ ржжрзЗржмрзЗред
            </p>
          </div>
          
          <div class="voice-commands">
            <h3>ЁЯУЛ рж╕ржм ржХржорж╛ржирзНржб рждрж╛рж▓рж┐ржХрж╛:</h3>
            
            <div style="display: grid; gap: 15px; margin-top: 15px;">
              <div style="background: white; padding: 15px; border-radius: 8px; border-left: 3px solid #2196f3;">
                <h4 style="color: #1976d2; margin: 0 0 8px 0;">ЁЯПе рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рзЗржмрж╛ ржЦрзБржБржЬрждрзЗ:</h4>
                <p style="margin: 0; font-size: 14px; color: #666;">
                  "рж╣рж╛рж╕ржкрж╛рждрж╛рж▓", "ржХрзНрж▓рж┐ржирж┐ржХ", "ржбрж╛ржХрзНрждрж╛рж░", "ржЪрж┐ржХрж┐рзОрж╕рж╛", "рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рзЗржмрж╛", "ржорзНржпрж╛ржк"
                </p>
              </div>
              
              <div style="background: white; padding: 15px; border-radius: 8px; border-left: 3px solid #9c27b0;">
                <h4 style="color: #7b1fa2; margin: 0 0 8px 0;">ЁЯза ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржпрзЗрж░ ржЬржирзНржп:</h4>
                <p style="margin: 0; font-size: 14px; color: #666;">
                  "ржоржи", "ржорзЗржЬрж╛ржЬ", "ржЪрзЗржХ", "ржорж╛ржирж╕рж┐ржХ", "рж╕рзНржЯрзНрж░рзЗрж╕", "ржЪрж╛ржк"
                </p>
              </div>
              
              <div style="background: white; padding: 15px; border-radius: 8px; border-left: 3px solid #f44336;">
                <h4 style="color: #d32f2f; margin: 0 0 8px 0;">ЁЯФТ ржЧрзЛржкржи рж╕рж╛рж╣рж╛ржпрзНржпрзЗрж░ ржЬржирзНржп:</h4>
                <p style="margin: 0; font-size: 14px; color: #666;">
                  "рж╕рж╛рж╣рж╛ржпрзНржп", "рж╣рзЗрж▓рзНржк", "ржЧрзЛржкржи", "рж╕ржорж╕рзНржпрж╛", "ржкрж░рж╛ржорж░рзНрж╢"
                </p>
              </div>
              
              <div style="background: white; padding: 15px; border-radius: 8px; border-left: 3px solid #ff9800;">
                <h4 style="color: #f57c00; margin: 0 0 8px 0;">ЁЯС╢ ржорж╛ ржУ рж╢рж┐рж╢рзБрж░ ржЬржирзНржп:</h4>
                <p style="margin: 0; font-size: 14px; color: #666;">
                  "ржЯрж┐ржХрж╛", "рж╢рж┐рж╢рзБ", "ржорж╛", "ржЧрж░рзНржнржмрждрзА", "ржмрж╛ржЪрзНржЪрж╛", "ржкрзНрж░рж╕ржм"
                </p>
              </div>
              
              <div style="background: white; padding: 15px; border-radius: 8px; border-left: 3px solid #4caf50;">
                <h4 style="color: #388e3c; margin: 0 0 8px 0;">ЁЯМжя╕П рж╕рзНржмрж╛рж╕рзНржерзНржп ржЯрж┐ржкрж╕рзЗрж░ ржЬржирзНржп:</h4>
                <p style="margin: 0; font-size: 14px; color: #666;">
                  "ржкрж░рж╛ржорж░рзНрж╢", "ржЯрж┐ржкрж╕", "ржмрж░рзНрж╖рж╛", "рж╢рзАржд", "ржЧрзНрж░рзАрж╖рзНржо", "ржЛрждрзБ"
                </p>
              </div>
              
              <div style="background: white; padding: 15px; border-radius: 8px; border-left: 3px solid #e91e63;">
                <h4 style="color: #c2185b; margin: 0 0 8px 0;">ЁЯй║ рж▓ржХрзНрж╖ржг ржЬрж╛ржирждрзЗ:</h4>
                <p style="margin: 0; font-size: 14px; color: #666;">
                  "рж▓ржХрзНрж╖ржг", "ржЙржкрж╕рж░рзНржЧ", "ржЕрж╕рзБрж╕рзНрже", "ржмрзНржпржерж╛", "ржЬрзНржмрж░", "ржХрж╛рж╢рж┐"
                </p>
              </div>
              
              <div style="background: white; padding: 15px; border-radius: 8px; border-left: 3px solid #00bcd4;">
                <h4 style="color: #0097a7; margin: 0 0 8px 0;">ЁЯУЕ рж╕рзНржмрж╛рж╕рзНржерзНржп ржХрзНржпрж╛ржорзНржкрзЗрж░ ржЬржирзНржп:</h4>
                <p style="margin: 0; font-size: 14px; color: #666;">
                  "ржХрзНржпрж╛ржорзНржк", "ржХрж░рзНржорж╕рзВржЪрзА", "ржЗржнрзЗржирзНржЯ", "рж╢рж┐ржмрж┐рж░", "ржЕржирзБрж╖рзНржарж╛ржи"
                </p>
              </div>
              
              <div style="background: white; padding: 15px; border-radius: 8px; border-left: 3px solid #795548;">
                <h4 style="color: #5d4037; margin: 0 0 8px 0;">ЁЯСитАНтЪХя╕П рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА ржЦрзБржБржЬрждрзЗ:</h4>
                <p style="margin: 0; font-size: 14px; color: #666;">
                  "рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА", "ржХрж░рзНржорзА", "ржирж╛рж░рзНрж╕", "рж╕рзЗржмрж┐ржХрж╛", "ржжрж╛ржЗ"
                </p>
              </div>
              
              <div style="background: white; padding: 15px; border-radius: 8px; border-left: 3px solid #607d8b;">
                <h4 style="color: #455a64; margin: 0 0 8px 0;">ЁЯФз ржирзЗржнрж┐ржЧрзЗрж╢ржирзЗрж░ ржЬржирзНржп:</h4>
                <p style="margin: 0; font-size: 14px; color: #666;">
                  "ржмржирзНржз", "ржХрзНрж▓рзЛржЬ", "ржмрж╛рждрж┐рж▓", "рж╣рзЛржо", "ржорзВрж▓", "рж╢рзБрж░рзБ"
                </p>
              </div>
              
              <div style="background: white; padding: 15px; border-radius: 8px; border-left: 3px solid #ff5722;">
                <h4 style="color: #d84315; margin: 0 0 8px 0;">тД╣я╕П рж╕рж╛рж╣рж╛ржпрзНржпрзЗрж░ ржЬржирзНржп:</h4>
                <p style="margin: 0; font-size: 14px; color: #666;">
                  "ржХржорж╛ржирзНржб", "ржирж┐рж░рзНржжрзЗрж╢", "ржХрзА ржмрж▓ржм"
                </p>
              </div>
            </div>
          </div>
          
          <div style="background: #fff3e0; padding: 20px; border-radius: 10px; margin-top: 20px; border-left: 4px solid #f57c00;">
            <h3 style="color: #e65100; margin: 0 0 10px 0;">ЁЯТб ржЯрж┐ржкрж╕:</h3>
            <ul style="margin: 0; padding-left: 20px; color: #666;">
              <li>рж╕рзНржкрж╖рзНржЯ ржХрж░рзЗ ржмрж▓рзБржи</li>
              <li>ржПржХржмрж╛рж░рзЗ ржПржХржЯрж┐ ржХржорж╛ржирзНржб ржмрж▓рзБржи</li>
              <li>ржорж╛ржЗржХрзНрж░рзЛржлрзЛржи ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзЗ рж╢рзБрж░рзБ ржХрж░рзБржи</li>
              <li>ржХржорж╛ржирзНржб ржмрж▓рж╛рж░ ржкрж░ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржи</li>
            </ul>
          </div>
          
          <button class="btn-submit" onclick="document.getElementById('modal').classList.remove('active'); speak('ржПржЦржи ржнржпрж╝рзЗрж╕ ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи!');">
            ржмрзБржЭрзЗржЫрж┐, ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐
          </button>
        </div>
      `;
      
      modal.classList.add('active');
      speak('ржнржпрж╝рзЗрж╕ ржХржорж╛ржирзНржб ржЧрж╛ржЗржб ржЦрзЛрж▓рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржПржЦрж╛ржирзЗ рж╕ржм ржирж┐рж░рзНржжрзЗрж╢ржирж╛ ржжрзЗржЦрзБржиред');
    }

    document.getElementById('voiceBtn').onclick = () => {
      if (!recognition) {
        showToast('ржнржпрж╝рзЗрж╕ рж╕рж╣рж╛ржпрж╝ржХ ржЖржкржирж╛рж░ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ рж╕ржорж░рзНржерж┐ржд ржиржпрж╝');
        return;
      }
      
      if (isListening) {
        recognition.stop();
        isListening = false;
        document.getElementById('voiceBtn').classList.remove('listening');
        speak('ржнржпрж╝рзЗрж╕ рж╕рж╣рж╛ржпрж╝ржХ ржмржирзНржз ржХрж░рж╛ рж╣рж▓рзЛ');
      } else {
        recognition.start();
        isListening = true;
        document.getElementById('voiceBtn').classList.add('listening');
        speak('ржмрж▓рзБржи, ржЖржорж┐ рж╢рзБржиржЫрж┐ред "ржХржорж╛ржирзНржб" ржмрж▓рзБржи рж╕ржм ржирж┐рж░рзНржжрзЗрж╢ржирж╛ ржЬрж╛ржирждрзЗред');
      }
    };

    // Admin authentication
    function getStoredAdmins() {
      const stored = localStorage.getItem('healthApp_admins');
      return stored ? JSON.parse(stored) : [{ username: 'admin', password: 'admin123', organization: 'ржбрзЗржорзЛ ржЕрж░рзНржЧрж╛ржирж╛ржЗржЬрзЗрж╢ржи' }];
    }

    function storeAdmin(adminData) {
      const admins = getStoredAdmins();
      admins.push(adminData);
      localStorage.setItem('healthApp_admins', JSON.stringify(admins));
    }

    function validateAdmin(username, password) {
      const admins = getStoredAdmins();
      return admins.find(admin => admin.username === username && admin.password === password);
    }

    function checkUsernameExists(username) {
      const admins = getStoredAdmins();
      return admins.some(admin => admin.username === username);
    }

    // Login functionality
    document.getElementById('loginBtn').onclick = () => {
      if (isAdmin) {
        logout();
        return;
      }

      const modal = document.getElementById('modal');
      const modalTitle = document.getElementById('modalTitle');
      const modalBody = document.getElementById('modalBody');
      
      modalTitle.textContent = 'ржЕрзНржпрж╛ржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓';
      modalBody.innerHTML = `
        <div class="auth-tabs">
          <button class="auth-tab active" data-tab="login">рж▓ржЧржЗржи</button>
          <button class="auth-tab" data-tab="signup">рж╕рж╛ржЗржи ржЖржк</button>
        </div>
        
        <div id="authContent">
          <!-- Auth content will be inserted here -->
        </div>
      `;
      
      modal.classList.add('active');
      
      const tabs = modalBody.querySelectorAll('.auth-tab');
      tabs.forEach(tab => {
        tab.onclick = () => {
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          currentAuthTab = tab.dataset.tab;
          renderAuthContent();
        };
      });
      
      renderAuthContent();
    };

    function renderAuthContent() {
      const authContent = document.getElementById('authContent');
      
      if (currentAuthTab === 'login') {
        authContent.innerHTML = `
          <div class="login-form">
            <div class="form-group">
              <label class="form-label">ржЗржЙржЬрж╛рж░ржирзЗржо</label>
              <input type="text" class="form-input" id="loginUsername" placeholder="ржЗржЙржЬрж╛рж░ржирзЗржо рж▓рж┐ржЦрзБржи">
            </div>
            <div class="form-group">
              <label class="form-label">ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб</label>
              <input type="password" class="form-input" id="loginPassword" placeholder="ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж▓рж┐ржЦрзБржи">
            </div>
            <button class="btn-submit" id="loginSubmitBtn">рж▓ржЧржЗржи ржХрж░рзБржи</button>
            <p style="text-align: center; margin-top: 15px; color: #999; font-size: 14px;">
              ржбрзЗржорзЛ: username: admin, password: admin123
            </p>
          </div>
        `;
        
        document.getElementById('loginSubmitBtn').onclick = () => {
          const username = document.getElementById('loginUsername').value;
          const password = document.getElementById('loginPassword').value;
          
          if (!username || !password) {
            showToast('ржЗржЙржЬрж╛рж░ржирзЗржо ржПржмржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐ржи');
            return;
          }
          
          const admin = validateAdmin(username, password);
          if (admin) {
            isAdmin = true;
            currentUserMode = 'admin';
            document.getElementById('loginBtn').textContent = 'рж▓ржЧржЖржЙржЯ';
            document.getElementById('modal').classList.remove('active');
            showToast(`рж╕рзНржмрж╛ржЧрждржо ${admin.organization}!`);
            renderDashboard();
          } else {
            showToast('ржнрзБрж▓ ржЗржЙржЬрж╛рж░ржирзЗржо ржмрж╛ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб');
          }
        };
      } else {
        authContent.innerHTML = `
          <div class="login-form">
            <div class="form-group">
              <label class="form-label">рж╕ржВрж╕рзНржерж╛рж░ ржирж╛ржо</label>
              <input type="text" class="form-input" id="signupOrganization" placeholder="ржпрзЗржоржи: ржмрзНрж░рзНржпрж╛ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп ржХрж░рзНржорж╕рзВржЪрзА">
            </div>
            <div class="form-group">
              <label class="form-label">ржЗржЙржЬрж╛рж░ржирзЗржо</label>
              <input type="text" class="form-input" id="signupUsername" placeholder="ржЗржЙржирж┐ржХ ржЗржЙржЬрж╛рж░ржирзЗржо">
            </div>
            <div class="form-group">
              <label class="form-label">ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб</label>
              <input type="password" class="form-input" id="signupPassword" placeholder="ржХржоржкржХрзНрж╖рзЗ рзм ржЕржХрзНрж╖рж░">
            </div>
            <div class="form-group">
              <label class="form-label">ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи</label>
              <input type="password" class="form-input" id="signupConfirmPassword" placeholder="ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржЖржмрж╛рж░ рж▓рж┐ржЦрзБржи">
            </div>
            <button class="btn-submit" id="signupSubmitBtn">ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ рждрзИрж░рж┐ ржХрж░рзБржи</button>
          </div>
        `;
        
        document.getElementById('signupSubmitBtn').onclick = async () => {
          const organization = document.getElementById('signupOrganization').value;
          const username = document.getElementById('signupUsername').value;
          const password = document.getElementById('signupPassword').value;
          const confirmPassword = document.getElementById('signupConfirmPassword').value;
          
          if (!organization || !username || !password || !confirmPassword) {
            showToast('рж╕ржм ржлрж┐рж▓рзНржб ржкрзВрж░ржг ржХрж░рзБржи');
            return;
          }
          
          if (password.length < 6) {
            showToast('ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржХржоржкржХрзНрж╖рзЗ рзм ржЕржХрзНрж╖рж░ рж╣рждрзЗ рж╣ржмрзЗ');
            return;
          }
          
          if (password !== confirmPassword) {
            showToast('ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржорж┐рж▓ржЫрзЗ ржирж╛');
            return;
          }
          
          if (checkUsernameExists(username)) {
            showToast('ржПржЗ ржЗржЙржЬрж╛рж░ржирзЗржо ржЗрждрж┐ржоржзрзНржпрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝рзЗржЫрзЗ');
            return;
          }
          
          const btn = document.getElementById('signupSubmitBtn');
          btn.disabled = true;
          btn.textContent = 'рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...';
          
          const adminData = {
            username,
            password,
            organization,
            created_date: new Date().toISOString()
          };
          
          // Store in localStorage
          storeAdmin(adminData);
          
          // Store in Data SDK
          const result = await window.dataSdk.create({
            id: Date.now().toString(),
            type: 'admin',
            date: new Date().toISOString(),
            admin_username: username,
            admin_password: password,
            admin_organization: organization,
            admin_created_date: new Date().toISOString()
          });
          
          btn.disabled = false;
          btn.textContent = 'ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ рждрзИрж░рж┐ ржХрж░рзБржи';
          
          if (result.isOk) {
            showToast('ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ рж╕ржлрж▓ржнрж╛ржмрзЗ рждрзИрж░рж┐ рж╣ржпрж╝рзЗржЫрзЗ! ржПржЦржи рж▓ржЧржЗржи ржХрж░рзБржиред');
            currentAuthTab = 'login';
            const tabs = document.querySelectorAll('.auth-tab');
            tabs.forEach(t => t.classList.remove('active'));
            tabs[0].classList.add('active');
            renderAuthContent();
          } else {
            showToast('ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ рждрзИрж░рж┐рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ');
          }
        };
      }
    }

    function logout() {
      isAdmin = false;
      currentUserMode = isAnonymous ? 'anonymous' : 'guest';
      document.getElementById('loginBtn').textContent = 'рж▓ржЧржЗржи';
      showToast('рж▓ржЧржЖржЙржЯ рж╕ржлрж▓');
      renderDashboard();
    }

    // Modal close
    document.getElementById('closeModal').onclick = () => {
      document.getElementById('modal').classList.remove('active');
    };

    document.getElementById('modal').onclick = (e) => {
      if (e.target.id === 'modal') {
        document.getElementById('modal').classList.remove('active');
      }
    };

    // Toast notification
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Symptom analysis functions
    function analyzeSymptoms(symptomText) {
      const text = symptomText.toLowerCase();
      const advice = {
        urgency: 'low',
        title: '',
        description: '',
        actions: [],
        homeRemedies: [],
        whenToSeeDoctor: ''
      };
      
      // Emergency symptoms
      if (text.includes('рж╢рзНржмрж╛рж╕ржХрж╖рзНржЯ') || text.includes('ржмрзБржХрзЗ ржмрзНржпржерж╛') || text.includes('ржмрзБржХ ржмрзНржпржерж╛')) {
        advice.urgency = 'emergency';
        advice.title = 'ЁЯЪи ржЬрж░рзБрж░рж┐ ржЕржмрж╕рзНржерж╛';
        advice.description = 'рж╢рзНржмрж╛рж╕ржХрж╖рзНржЯ ржПржмржВ ржмрзБржХрзЗ ржмрзНржпржерж╛ ржЧрзБрж░рзБрждрж░ рж╕ржорж╕рзНржпрж╛рж░ рж▓ржХрзНрж╖ржг рж╣рждрзЗ ржкрж╛рж░рзЗред';
        advice.actions = ['ржЕржмрж┐рж▓ржорзНржмрзЗ ржирж┐ржХржЯрждржо рж╣рж╛рж╕ржкрж╛рждрж╛рж▓рзЗ ржпрж╛ржи', 'ржЕрзНржпрж╛ржорзНржмрзБрж▓рзЗржирзНрж╕ ржбрж╛ржХрзБржи', 'рж╢рзБржпрж╝рзЗ ржерж╛ржХрзБржи ржПржмржВ ржЖрждржЩрзНржХрж┐ржд рж╣ржмрзЗржи ржирж╛'];
        advice.whenToSeeDoctor = 'ржПржЦржиржЗ';
      }
      else if (text.includes('рж░ржХрзНрждржкрж╛ржд') || text.includes('рж░ржХрзНржд') && (text.includes('ржмржорж┐') || text.includes('ржкрж╛ржпрж╝ржЦрж╛ржирж╛'))) {
        advice.urgency = 'emergency';
        advice.title = 'ЁЯЪи ржЬрж░рзБрж░рж┐ ржЕржмрж╕рзНржерж╛';
        advice.description = 'рж░ржХрзНрждржкрж╛ржд ржЧрзБрж░рзБрждрж░ рж╕ржорж╕рзНржпрж╛рж░ рж▓ржХрзНрж╖ржгред';
        advice.actions = ['ржЕржмрж┐рж▓ржорзНржмрзЗ рж╣рж╛рж╕ржкрж╛рждрж╛рж▓рзЗ ржпрж╛ржи', 'ржмрзЗрж╢рж┐ ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи', 'ржмрж┐рж╢рзНрж░рж╛ржо ржирж┐ржи'];
        advice.whenToSeeDoctor = 'ржПржЦржиржЗ';
      }
      else if (text.includes('ржЧрж░рзНржнржмрждрзА') && text.includes('рж░ржХрзНрждржкрж╛ржд')) {
        advice.urgency = 'emergency';
        advice.title = 'ЁЯЪи ржЬрж░рзБрж░рж┐ ржЕржмрж╕рзНржерж╛';
        advice.description = 'ржЧрж░рзНржнржХрж╛рж▓рзАржи рж░ржХрзНрждржкрж╛ржд ржЕрждрзНржпржирзНржд ржЧрзБрж░рзБрждрж░ред';
        advice.actions = ['ржЕржмрж┐рж▓ржорзНржмрзЗ рж╣рж╛рж╕ржкрж╛рждрж╛рж▓рзЗ ржпрж╛ржи', 'рж╢рзБржпрж╝рзЗ ржерж╛ржХрзБржи', 'ржХрж┐ржЫрзБ ржЦрж╛ржмрзЗржи ржирж╛'];
        advice.whenToSeeDoctor = 'ржПржЦржиржЗ';
      }
      
      // High urgency symptoms
      else if (text.includes('ржЬрзНржмрж░') && (text.includes('ржорж╛ржерж╛ржмрзНржпржерж╛') || text.includes('ржмржорж┐'))) {
        advice.urgency = 'high';
        advice.title = 'тЪая╕П ржЙржЪрзНржЪ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░';
        advice.description = 'ржЬрзНржмрж░рзЗрж░ рж╕рж╛ржерзЗ ржорж╛ржерж╛ржмрзНржпржерж╛ ржУ ржмржорж┐ ржбрзЗржЩрзНржЧрзБ ржмрж╛ ржЕржирзНржп ржЧрзБрж░рзБрждрж░ рж░рзЛржЧрзЗрж░ рж▓ржХрзНрж╖ржг рж╣рждрзЗ ржкрж╛рж░рзЗред';
        advice.actions = ['ржжрзНрж░рзБржд ржбрж╛ржХрзНрждрж╛рж░ ржжрзЗржЦрж╛ржи', 'ржмрзЗрж╢рж┐ ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи', 'ржмрж┐рж╢рзНрж░рж╛ржо ржирж┐ржи'];
        advice.homeRemedies = ['ржкрзНржпрж╛рж░рж╛рж╕рж┐ржЯрж╛ржорж▓ ржЦрж╛ржи', 'ржарж╛ржирзНржбрж╛ ржкрж╛ржирж┐рждрзЗ ржЧрж╛ ржорзБржЫрзБржи', 'ржЦрж╛ржмрж╛рж░ рж╕рзНржпрж╛рж▓рж╛ржЗржи ржЦрж╛ржи'];
        advice.whenToSeeDoctor = 'рзирзк ржШржгрзНржЯрж╛рж░ ржоржзрзНржпрзЗ';
      }
      else if (text.includes('ржбрж╛ржпрж╝рж░рж┐ржпрж╝рж╛') && text.includes('рж░ржХрзНржд')) {
        advice.urgency = 'high';
        advice.title = 'тЪая╕П ржЙржЪрзНржЪ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░';
        advice.description = 'рж░ржХрзНрждржпрзБржХрзНржд ржбрж╛ржпрж╝рж░рж┐ржпрж╝рж╛ ржЧрзБрж░рзБрждрж░ рж╕ржВржХрзНрж░ржоржгрзЗрж░ рж▓ржХрзНрж╖ржгред';
        advice.actions = ['ржжрзНрж░рзБржд ржбрж╛ржХрзНрждрж╛рж░ ржжрзЗржЦрж╛ржи', 'ржЦрж╛ржмрж╛рж░ рж╕рзНржпрж╛рж▓рж╛ржЗржи ржЦрж╛ржи', 'ржкрж╛ржирж┐ ржмрзЗрж╢рж┐ ржкрж╛ржи ржХрж░рзБржи'];
        advice.homeRemedies = ['ORS ржЦрж╛ржи', 'ржирж░ржо ржЦрж╛ржмрж╛рж░ ржЦрж╛ржи', 'ржжрзБржз ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржи'];
        advice.whenToSeeDoctor = 'ржЖржЬржЗ';
      }
      
      // Medium urgency symptoms
      else if (text.includes('ржЬрзНржмрж░')) {
        advice.urgency = 'medium';
        advice.title = 'ЁЯМбя╕П рж╕рж╛ржзрж╛рж░ржг ржЬрзНржмрж░';
        advice.description = 'ржЬрзНржмрж░ рж╕рж╛ржзрж╛рж░ржгржд ржнрж╛ржЗрж░рж╛рж▓ рж╕ржВржХрзНрж░ржоржгрзЗрж░ рж▓ржХрзНрж╖ржгред';
        advice.actions = ['ржмрж┐рж╢рзНрж░рж╛ржо ржирж┐ржи', 'ржмрзЗрж╢рж┐ ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи', 'рж╣рж╛рж▓ржХрж╛ ржЦрж╛ржмрж╛рж░ ржЦрж╛ржи'];
        advice.homeRemedies = ['ржкрзНржпрж╛рж░рж╛рж╕рж┐ржЯрж╛ржорж▓ ржЦрж╛ржи', 'ржарж╛ржирзНржбрж╛ ржкрж╛ржирж┐рждрзЗ ржЧрж╛ ржорзБржЫрзБржи', 'рж▓рзЗржмрзБрж░ рж╢рж░ржмржд ржЦрж╛ржи'];
        advice.whenToSeeDoctor = 'рзй ржжрж┐ржи ржкрж░ ржЬрзНржмрж░ ржирж╛ ржХржорж▓рзЗ';
      }
      else if (text.includes('ржХрж╛рж╢рж┐')) {
        advice.urgency = 'medium';
        advice.title = 'ЁЯШ╖ ржХрж╛рж╢рж┐';
        advice.description = 'ржХрж╛рж╢рж┐ рж╕рж╛ржзрж╛рж░ржгржд рж╕рж░рзНржжрж┐-ржХрж╛рж╢рж┐рж░ рж▓ржХрзНрж╖ржгред';
        advice.actions = ['ржЧрж░ржо ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи', 'ржмрж┐рж╢рзНрж░рж╛ржо ржирж┐ржи', 'ржзрзВржоржкрж╛ржи ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржи'];
        advice.homeRemedies = ['ржоржзрзБ ржУ ржЖржжрж╛рж░ ржЪрж╛', 'ржЧрж░ржо ржкрж╛ржирж┐рждрзЗ рж▓ржмржг ржжрж┐ржпрж╝рзЗ ржЧржбрж╝ржЧржбрж╝рж╛', 'рждрзБрж▓рж╕рзА ржкрж╛рждрж╛рж░ рж░рж╕'];
        advice.whenToSeeDoctor = 'рзз рж╕ржкрзНрждрж╛рж╣ ржкрж░ ржХрж╛рж╢рж┐ ржирж╛ ржХржорж▓рзЗ';
      }
      else if (text.includes('ржорж╛ржерж╛ржмрзНржпржерж╛') || text.includes('ржорж╛ржерж╛ ржмрзНржпржерж╛')) {
        advice.urgency = 'medium';
        advice.title = 'ЁЯдХ ржорж╛ржерж╛ржмрзНржпржерж╛';
        advice.description = 'ржорж╛ржерж╛ржмрзНржпржерж╛ рж╕рж╛ржзрж╛рж░ржгржд ржЪрж╛ржк ржмрж╛ ржХрзНрж▓рж╛ржирзНрждрж┐рж░ ржХрж╛рж░ржгрзЗ рж╣ржпрж╝ред';
        advice.actions = ['ржмрж┐рж╢рзНрж░рж╛ржо ржирж┐ржи', 'ржкрж░рзНржпрж╛ржкрзНржд ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи', 'ржЪрзЛржЦрзЗ ржЪрж╛ржк ржХржо ржжрж┐ржи'];
        advice.homeRemedies = ['ржкрзНржпрж╛рж░рж╛рж╕рж┐ржЯрж╛ржорж▓ ржЦрж╛ржи', 'ржорж╛ржерж╛ржпрж╝ ржарж╛ржирзНржбрж╛ рж╕рзЗржХ ржжрж┐ржи', 'ржЕржирзНржзржХрж╛рж░ ржШрж░рзЗ ржмрж┐рж╢рзНрж░рж╛ржо ржирж┐ржи'];
        advice.whenToSeeDoctor = 'рждрзАржмрзНрж░ ржмрзНржпржерж╛ рж╣рж▓рзЗ ржмрж╛ рзй ржжрж┐ржи ржкрж░ ржирж╛ ржХржорж▓рзЗ';
      }
      else if (text.includes('ржкрзЗржЯ ржмрзНржпржерж╛') || text.includes('ржкрзЗржЯрзЗ ржмрзНржпржерж╛')) {
        advice.urgency = 'medium';
        advice.title = 'ЁЯдв ржкрзЗржЯ ржмрзНржпржерж╛';
        advice.description = 'ржкрзЗржЯ ржмрзНржпржерж╛ рж╣ржЬржорзЗрж░ рж╕ржорж╕рзНржпрж╛ ржмрж╛ ржЧрзНржпрж╛рж╕рзЗрж░ ржХрж╛рж░ржгрзЗ рж╣рждрзЗ ржкрж╛рж░рзЗред';
        advice.actions = ['рж╣рж╛рж▓ржХрж╛ ржЦрж╛ржмрж╛рж░ ржЦрж╛ржи', 'ржмрзЗрж╢рж┐ ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи', 'ржмрж┐рж╢рзНрж░рж╛ржо ржирж┐ржи'];
        advice.homeRemedies = ['ржЖржжрж╛ ржЪрж╛ ржЦрж╛ржи', 'ржкрзЗржЯрзЗ ржЧрж░ржо рж╕рзЗржХ ржжрж┐ржи', 'рж▓рзЗржмрзБрж░ ржкрж╛ржирж┐ ржЦрж╛ржи'];
        advice.whenToSeeDoctor = 'рждрзАржмрзНрж░ ржмрзНржпржерж╛ рж╣рж▓рзЗ ржмрж╛ рзи ржжрж┐ржи ржкрж░ ржирж╛ ржХржорж▓рзЗ';
      }
      else if (text.includes('ржбрж╛ржпрж╝рж░рж┐ржпрж╝рж╛') || text.includes('ржкрж╛рждрж▓рж╛ ржкрж╛ржпрж╝ржЦрж╛ржирж╛')) {
        advice.urgency = 'medium';
        advice.title = 'ЁЯТз ржбрж╛ржпрж╝рж░рж┐ржпрж╝рж╛';
        advice.description = 'ржбрж╛ржпрж╝рж░рж┐ржпрж╝рж╛ рж╕рж╛ржзрж╛рж░ржгржд ржЦрж╛ржжрзНржпрзЗ ржмрж┐рж╖ржХрзНрж░рж┐ржпрж╝рж╛ ржмрж╛ ржнрж╛ржЗрж░рж╛рж╕рзЗрж░ ржХрж╛рж░ржгрзЗ рж╣ржпрж╝ред';
        advice.actions = ['ржЦрж╛ржмрж╛рж░ рж╕рзНржпрж╛рж▓рж╛ржЗржи ржЦрж╛ржи', 'ржмрзЗрж╢рж┐ ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи', 'ржирж░ржо ржЦрж╛ржмрж╛рж░ ржЦрж╛ржи'];
        advice.homeRemedies = ['ORS ржЦрж╛ржи', 'ржЪрж╛рж▓рзЗрж░ ржорж╛ржбрж╝ ржЦрж╛ржи', 'ржХрж▓рж╛ ржЦрж╛ржи'];
        advice.whenToSeeDoctor = 'рзй ржжрж┐ржи ржкрж░ ржирж╛ ржХржорж▓рзЗ ржмрж╛ ржкрж╛ржирж┐рж╢рзВржирзНржпрждрж╛рж░ рж▓ржХрзНрж╖ржг ржжрзЗржЦрж╛ ржжрж┐рж▓рзЗ';
      }
      
      // Low urgency symptoms
      else if (text.includes('рж╕рж░рзНржжрж┐') || text.includes('ржирж╛ржХ ржмржирзНржз')) {
        advice.urgency = 'low';
        advice.title = 'ЁЯдз рж╕рж░рзНржжрж┐';
        advice.description = 'рж╕рж░рзНржжрж┐ рж╕рж╛ржзрж╛рж░ржгржд ржнрж╛ржЗрж░рж╛рж▓ рж╕ржВржХрзНрж░ржоржгрзЗрж░ рж▓ржХрзНрж╖ржгред';
        advice.actions = ['ржмрж┐рж╢рзНрж░рж╛ржо ржирж┐ржи', 'ржЧрж░ржо ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи', 'ржнрж┐ржЯрж╛ржорж┐ржи рж╕рж┐ ржЦрж╛ржи'];
        advice.homeRemedies = ['ржЖржжрж╛ ржЪрж╛', 'ржЧрж░ржо ржкрж╛ржирж┐рждрзЗ ржмрж╛рж╖рзНржк ржирж┐ржи', 'ржоржзрзБ ржЦрж╛ржи'];
        advice.whenToSeeDoctor = 'рзз рж╕ржкрзНрждрж╛рж╣ ржкрж░ ржирж╛ ржХржорж▓рзЗ';
      }
      else if (text.includes('ржХрзНрж▓рж╛ржирзНрждрж┐') || text.includes('ржжрзБрж░рзНржмрж▓рждрж╛')) {
        advice.urgency = 'low';
        advice.title = 'ЁЯШ┤ ржХрзНрж▓рж╛ржирзНрждрж┐';
        advice.description = 'ржХрзНрж▓рж╛ржирзНрждрж┐ рж╕рж╛ржзрж╛рж░ржгржд ржкрж░рзНржпрж╛ржкрзНржд ржмрж┐рж╢рзНрж░рж╛ржо ржирж╛ ржирзЗржУржпрж╝рж╛рж░ ржХрж╛рж░ржгрзЗ рж╣ржпрж╝ред';
        advice.actions = ['ржкрж░рзНржпрж╛ржкрзНржд ржШрзБржорж╛ржи', 'ржкрзБрж╖рзНржЯрж┐ржХрж░ ржЦрж╛ржмрж╛рж░ ржЦрж╛ржи', 'рж╣рж╛рж▓ржХрж╛ ржмрзНржпрж╛ржпрж╝рж╛ржо ржХрж░рзБржи'];
        advice.homeRemedies = ['рж▓рзЗржмрзБрж░ рж╢рж░ржмржд', 'ржбрж╛ржмрзЗрж░ ржкрж╛ржирж┐', 'ржЖржпрж╝рж░ржи рж╕ржорзГржжрзНржз ржЦрж╛ржмрж╛рж░'];
        advice.whenToSeeDoctor = 'ржжрзАрж░рзНржШржжрж┐ржи ржХрзНрж▓рж╛ржирзНрждрж┐ ржерж╛ржХрж▓рзЗ';
      }
      
      // Default advice for unrecognized symptoms
      else {
        advice.urgency = 'medium';
        advice.title = 'ЁЯй║ рж╕рж╛ржзрж╛рж░ржг ржкрж░рж╛ржорж░рзНрж╢';
        advice.description = 'ржЖржкржирж╛рж░ рж▓ржХрзНрж╖ржгрзЗрж░ ржЬржирзНржп рж╕рж╛ржзрж╛рж░ржг ржпрждрзНржи ржирж┐ржиред';
        advice.actions = ['ржмрж┐рж╢рзНрж░рж╛ржо ржирж┐ржи', 'ржкрж░рзНржпрж╛ржкрзНржд ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи', 'ржкрзБрж╖рзНржЯрж┐ржХрж░ ржЦрж╛ржмрж╛рж░ ржЦрж╛ржи'];
        advice.homeRemedies = ['ржЧрж░ржо ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи', 'ржкрж░рзНржпрж╛ржкрзНржд ржШрзБржорж╛ржи', 'ржЪрж╛ржк ржХржо ржирж┐ржи'];
        advice.whenToSeeDoctor = 'рж▓ржХрзНрж╖ржг ржмрж╛ржбрж╝рж▓рзЗ ржмрж╛ ржирж╛ ржХржорж▓рзЗ';
      }
      
      return advice;
    }
    
    function displaySymptomAdvice(advice) {
      const adviceDiv = document.getElementById('symptomAdvice');
      
      let urgencyColor = '#4caf50'; // Green for low
      let urgencyBg = '#e8f5e9';
      
      if (advice.urgency === 'medium') {
        urgencyColor = '#ff9800'; // Orange
        urgencyBg = '#fff3e0';
      } else if (advice.urgency === 'high') {
        urgencyColor = '#f44336'; // Red
        urgencyBg = '#ffebee';
      } else if (advice.urgency === 'emergency') {
        urgencyColor = '#d32f2f'; // Dark red
        urgencyBg = '#ffcdd2';
      }
      
      adviceDiv.innerHTML = `
        <div style="background: ${urgencyBg}; padding: 20px; border-radius: 10px; border-left: 4px solid ${urgencyColor};">
          <h3 style="color: ${urgencyColor}; margin: 0 0 10px 0;">${advice.title}</h3>
          <p style="margin: 0 0 15px 0; color: #666; line-height: 1.6;">${advice.description}</p>
          
          <div style="margin-bottom: 15px;">
            <h4 style="color: #333; margin: 0 0 8px 0; font-size: 16px;">ЁЯУЛ ржХрж░ржгрзАржпрж╝:</h4>
            <ul style="margin: 0; padding-left: 20px; color: #666;">
              ${advice.actions.map(action => `<li style="margin: 5px 0;">${action}</li>`).join('')}
            </ul>
          </div>
          
          ${advice.homeRemedies.length > 0 ? `
            <div style="margin-bottom: 15px;">
              <h4 style="color: #333; margin: 0 0 8px 0; font-size: 16px;">ЁЯПа ржШрж░рзЛржпрж╝рж╛ ржЪрж┐ржХрж┐рзОрж╕рж╛:</h4>
              <ul style="margin: 0; padding-left: 20px; color: #666;">
                ${advice.homeRemedies.map(remedy => `<li style="margin: 5px 0;">${remedy}</li>`).join('')}
              </ul>
            </div>
          ` : ''}
          
          <div style="background: rgba(255,255,255,0.7); padding: 12px; border-radius: 8px; margin-top: 15px;">
            <h4 style="color: #333; margin: 0 0 5px 0; font-size: 16px;">ЁЯСитАНтЪХя╕П ржбрж╛ржХрзНрждрж╛рж░ ржжрзЗржЦрж╛ржмрзЗржи:</h4>
            <p style="margin: 0; color: #666; font-weight: 600;">${advice.whenToSeeDoctor}</p>
          </div>
          
          <div style="background: rgba(255,255,255,0.7); padding: 12px; border-radius: 8px; margin-top: 10px;">
            <p style="margin: 0; color: #999; font-size: 14px; font-style: italic;">
              тЪая╕П ржПржЗ ржкрж░рж╛ржорж░рзНрж╢ рж╢рзБржзрзБржорж╛рждрзНрж░ рж╕рж╛ржзрж╛рж░ржг рждржерзНржпрзЗрж░ ржЬржирзНржпред ржЪрж┐ржХрж┐рзОрж╕ржХрзЗрж░ ржкрж░рж╛ржорж░рзНрж╢рзЗрж░ ржмрж┐ржХрж▓рзНржк ржиржпрж╝ред
            </p>
          </div>
        </div>
      `;
      
      adviceDiv.style.display = 'block';
      
      // Scroll to advice
      adviceDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    // Initialize
    initializeApp();
    initVoiceAssistant();
  </script>
</body>
</html>

